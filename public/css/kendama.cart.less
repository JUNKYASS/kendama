/*
 * Cart CSS file, easytolose.ru
 *
 * Copyright (c) 2020 Mikhylichenko Ruslan, plarson.ru
 *
 * Date: 28-11-2020
 */

section.cart {
  & > .inner {
    position: relative;

    display: flex;
    justify-content: space-between;

    .headline-block {
      margin-bottom: 40px;

      h3 {
        margin-bottom: 5px;

        span {
          color: @palitra-beige;
        }
      }
    }


    .cart-items {
      display: grid;
      height: max-content;
      width: 50%;

      & > .items {
        display: grid;
        grid-template-rows: 1fr;
        grid-gap: @gap;
        // padding: 20px;

        // background-color: @color-white1;

        .item {
          display: grid;
          // grid-template-columns: 200px 1fr;
          grid-template-columns: auto 1fr;
          grid-gap: @gap;
          padding: @gap;

          // font-family: Oswald;
          // font-weight: 100;

          // background-color: @color-black3;
          background-image: linear-gradient(45deg, #1d1d1d 0, #141414 68%);

          &:not(:first-child) {
            // border-top: 1px solid @color-gray1;
          }

          &:first-child {
            // padding-top: 0;
          }

          &:last-child {
            // padding-bottom: 0;
          }

          & > a {
            display: flex;

            img {
              // width: 110px;
              // height: 110px;
              object-fit: contain;
              user-select: none;
            }
          }

          .info {
            position: relative;

            display: grid;
            grid-template-rows: auto 1fr auto;
            grid-gap: 20px;
            // grid-template-rows: 1fr auto auto 1fr;
            // align-items: end;

            .name {
              font-size: 22px;
              line-height: 0.9;
              font-family: Oswald;
              font-weight: 300;

              color: @color-black3;
            }

            .category {
              text-transform: lowercase;
              font-size: 12px;
              letter-spacing: 0;

              color: @color-black1;
            }

            .price {
              // display: grid;
              // grid-gap: 3px;
              // width: max-content;

              &.discount {
                // .discount-value {
                //   display: block;
                // }

                .old {
                  display: block;
                }

                .current {
                  color: @palitra-pink;

                  .rub {
                    color: @palitra-pink;
                  }
                }
              }

              .discount-value {
                display: none;
                margin-left: -5px;

                font-family: Oswald;
                font-weight: 400;
                font-size: 12px;
                line-height: 1.2;

                color: @color-green;
              }

              .old {
                display: none;

                font-family: Oswald;
                font-weight: 100;
                text-decoration: line-through;
                font-size: 12px;

                color: @palitra-gray;
              }

              .current {
                font-family: Oswald;
                font-weight: 100;
                font-size: 12px;

                color: @palitra-gray;
              }
            }

            .quantity {
              position: absolute;
              top: 4px;
              left: -48px;

              display: grid;
              grid-template-rows: auto 1fr auto;
              grid-gap: 20px;
              justify-items: center;

              .amount {
                display: grid;
                align-items: center;
                justify-items: center;

                input {
                  height: 100%;
                  width: 24px;
                  padding: 0;

                  text-align: center;
                  font-size: 14px;

                  border: none;
                  background-color: transparent;
                  color: @color-white1;

                  // Выключаем стандартные стрелочки у input[type=number]
                  &[type='number'] {
                    -moz-appearance:textfield;
                  }

                  &::-webkit-outer-spin-button,
                  &::-webkit-inner-spin-button {
                    -webkit-appearance: none;
                  }
                }

                .unit {
                  font-size: 10px;

                  user-select: none;
                }
              }

              .minus {
                position: relative;

                height: 100%;
                width: 14px;

                border-radius: 5px;

                cursor: pointer;

                &:hover {
                  &:after {
                    color: @color-gray1;
                  }
                }

                &:after {
                  content: "—";

                  position: absolute;
                  left: 50%;
                  top: 50%;

                  font-size: 10px;
                  // font-family: 'CourierNew';

                  color: @palitra-gray;

                  transform: translate(-50%, -50%);
                  transition: color 0.2s;
                }
              }

              .plus {
                position: relative;

                height: 100%;
                width: 14px;

                // background-color: @color-white2;
                border-radius: 5px;

                cursor: pointer;

                &:hover {
                  &:after {
                    color: @color-gray1;
                  }
                }

                &:after {
                  content: "+";

                  position: absolute;
                  left: 50%;
                  top: 50%;

                  font-size: 22px;
                  // font-family: 'CourierNew';

                  color: @palitra-gray;
                  transition: color 0.2s;

                  transform: translate(-50%, -50%);
                }
              }
            }

            .remove {
              position: absolute;
              bottom: 0;
              left: -42px;

              width: max-content;

              color: @color-gray4;

              cursor: pointer;
              transition: 0.2s;

              &:hover {
                color: @color-red;
              }
            }

            .price-total {
              align-self: end;

              line-height: 0.8;

              user-select: none;

              span.title {
                display: none;
                margin-right: 5px;

                font-size: 12px;
                font-weight: 400;

                color: @color-gray4;
              }

              span.value {
                font-size: 16px;
                font-family: Oswald;
                font-weight: 100;
              }
            }
          }
        }
      }

      .amount-total {
        // display: flex;
        margin-top: 20px;
        padding-left: @gap;

        user-select: none;
      }

      .clear-cart {
        justify-self: end;

        cursor: pointer;
      }

    }

    .cart-info {
      position: -webkit-sticky !important;
      position: -moz-sticky !important;
      position: -ms-sticky !important;
      position: -o-sticky !important;
      position: sticky!important;
      top: 20px;

      width: 40%;
      height: max-content;
      // margin-right: 80px;

      .cart-order {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-gap: 20px;

        label.primary {
          &.name, &.address, &.note {
            grid-column: span 2;
          }
        }

        .notice {
          grid-column: span 2;

          line-height: 0.8;

          color: @palitra-gray;

          span {
            font-size: 16px;

            color: lighten(@palitra-pink, 20%);
          }
        }
      }

      .final-info {
        margin-top: 40px;
        width: max-content;

        .total {
          display: flex;
          justify-content: space-between;
          align-items: flex-end;

          .title {

          }

          .value {
            font-weight: 600px;
            font-size: 18px;
            font-family: oswald;
          }
        }

        .btn-primary {
          margin-top: 20px;

          // background-color: @palitra-black;

          cursor: pointer;
        }
      }
    }
  }

  @media (max-width: @screen-l-max) {
    & > .inner {
      .cart-info {
        width: 47%;
      }

      .cart-items {
        width: 45%;
      }
    }
  }

  @media (max-width: @screen-m-max) {
    & > .inner {
      display: grid;
      grid-template-columns: 1fr;
      grid-gap: 60px;
      justify-content: unset;

      .cart-info {
        order: 2;

        position: initial;

        width: 100%;
      }

      .cart-items {
        order: 1;

        width: 100%;
      }
    }
  }

  @media (max-width: @screen-x-max) {
    & > .inner {
      .cart-info {
        .cart-order {
          grid-template-columns: 1fr;

          label.primary {
            order: 2;

            &.name, &.address, &.note {
              grid-column: unset;
            }
          }

          .notice {
            order: 1;
            grid-column: unset;

            font-size: 12px;
            line-height: 1;
          }
        }
      }

      .cart-items {
        & > .items {
          .item {
            min-height: 141px;

            .info {
              .name {
                font-size: 18px;
              }

              .price-total {
                span.value {
                  font-size: 14px;
                }
              }

              .quantity {
                left: -44px;

                grid-gap: 15px;

                .amount {
                  input {
                    font-size: 12px;
                  }
                }
              }

              .icon {
                left: -39px;
              }
            }



            & > a {
              justify-self: end;

              img {
                max-width: 80px;
              }
            }
          }
        }

        .amount-total {
          padding-left: 0;

          font-size: 12px;
          line-height: 1;
        }
      }
    }
  }
}
