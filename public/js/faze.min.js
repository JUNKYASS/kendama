(()=>{"use strict";var e={p:"/"};const t=class{constructor(e="",t=""){this.prefix=e,this.postfix=t}warning(e,t){console.warn(`${this.prefix} ${e} ${this.postfix}`,t||"")}error(e){throw new Error(`${this.prefix} ${e} ${this.postfix}`)}};var i=function(e,t,i,s){return new(i||(i=Promise))((function(o,a){function n(e){try{d(s.next(e))}catch(e){a(e)}}function r(e){try{d(s.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,r)}d((s=s.apply(e,t||[])).next())}))};const s=class{constructor(e,t){if(!e)throw new Error("Не задан объект при нажатии на который должно появляться модальное окно");const i={title:"",url:void 0,html:void 0,class:"",event:"click",evented:!0,draggable:!1,resizable:!1,delayToClose:0,additionalParams:void 0,callbacks:{success:void 0,error:void 0},buttons:[]};this.config=Object.assign(i,t),this.node=e,this.bind()}reset(){this.modalParts={closeButtonNode:document.createElement("div"),headerNode:document.createElement("header"),bodyNode:document.createElement("main"),footerNode:document.createElement("footer"),fullNode:document.createElement("div"),wrapperNode:document.createElement("div"),resizeBorders:{top:document.createElement("div"),right:document.createElement("div"),bottom:document.createElement("div"),left:document.createElement("div")}}}bind(){this.config.evented?this.node.addEventListener(this.config.event,e=>{e.preventDefault(),this.create()}):this.create()}create(){document.body.classList.add("faze-modal-opened"),this.getContent().then(e=>{if(this.build(e),this.addAdditionalParams(),this.config.draggable&&this.bindDrag(),this.config.resizable&&this.bindResize(),"function"==typeof this.config.callbacks.success)try{this.config.callbacks.success(this.modalParts)}catch(e){console.error('Ошибка исполнения пользовательского метода "success":',e)}this.bindKeys()}).catch(e=>{if(console.error("Ошибка при получении данных с сервера по адресу "+this.config.url,e),"function"==typeof this.config.callbacks.error)try{this.config.callbacks.error(this.modalParts)}catch(e){console.error('Ошибка исполнения пользовательского метода "error":',e)}})}addAdditionalParams(){const e=this.modalParts.bodyNode.querySelector("form");if(e)try{const t=JSON.parse(this.config.additionalParams||"{}");Object.keys(t).forEach(i=>{const s=document.createElement("input");s.type="hidden",s.name=i,s.value=t[i],e.appendChild(s)})}catch(e){console.error("Неправильный формат дополнительных переменных переданных в модальное окно!\nТребуется JSON объект!\n"+e)}}build(e){this.reset(),this.buildHeader(),this.buildBody(e),this.buildFooter(),this.buildFull(),this.modalParts.wrapperNode.className="faze-modal-wrapper",this.modalParts.wrapperNode.appendChild(this.modalParts.fullNode),document.body.appendChild(this.modalParts.wrapperNode)}buildHeader(){this.buildAndBindCloseButton();const e=document.createElement("span");e.innerHTML=this.config.title||"",this.modalParts.headerNode=document.createElement("header"),this.modalParts.headerNode.appendChild(e),this.modalParts.headerNode.appendChild(this.modalParts.closeButtonNode)}buildAndBindCloseButton(){this.modalParts.closeButtonNode.className="faze-close",this.modalParts.closeButtonNode.addEventListener("click",e=>{e.preventDefault(),this.close()})}close(){document.body.classList.remove("faze-modal-opened"),this.modalParts.fullNode.classList.add("faze-closing"),setTimeout(()=>this.modalParts.wrapperNode.remove(),this.config.delayToClose),this.unbindKeys()}buildBody(e){this.modalParts.bodyNode.innerHTML=e||""}buildFooter(){this.buildButtons()}buildButtons(){const e=document.createElement("div");if(e.className="faze-buttons",this.config.buttons&&this.config.buttons.length>0){for(const t of this.config.buttons){const i=document.createElement("button");if(i.className=t.class||"",i.textContent=t.caption||"","function"==typeof t.callback)try{i.addEventListener("click",()=>t.callback(this.modalParts,i))}catch(e){console.error(e)}e.appendChild(i)}this.modalParts.footerNode.appendChild(e)}}keyUpCallback(e){"Escape"===e.key&&this.close()}bindKeys(){document.addEventListener("keyup",this.keyUpCallback.bind(this))}unbindKeys(){document.removeEventListener("keyup",this.keyUpCallback.bind(this))}buildFull(){this.modalParts.fullNode.className="faze-modal "+this.config.class,this.config.draggable&&this.modalParts.fullNode.classList.add("faze-modal-draggable"),this.modalParts.fullNode.appendChild(this.modalParts.headerNode),this.modalParts.fullNode.appendChild(this.modalParts.bodyNode),this.modalParts.fullNode.appendChild(this.modalParts.footerNode),this.config.resizable&&(this.modalParts.fullNode.classList.add("faze-modal-resizable"),this.buildBordersForResize())}buildBordersForResize(){this.modalParts.resizeBorders.top.className="faze-modal-resize-border faze-modal-resize-border-top",this.modalParts.fullNode.appendChild(this.modalParts.resizeBorders.top),this.modalParts.resizeBorders.right.className="faze-modal-resize-border faze-modal-resize-border-right",this.modalParts.fullNode.appendChild(this.modalParts.resizeBorders.right),this.modalParts.resizeBorders.bottom.className="faze-modal-resize-border faze-modal-resize-border-bottom",this.modalParts.fullNode.appendChild(this.modalParts.resizeBorders.bottom),this.modalParts.resizeBorders.left.className="faze-modal-resize-border faze-modal-resize-border-left",this.modalParts.fullNode.appendChild(this.modalParts.resizeBorders.left)}getContent(){return i(this,void 0,void 0,(function*(){if(this.config.url){const e=yield fetch(this.config.url,{credentials:"same-origin"});return yield e.text()}return(yield this.config.html)||""}))}bindResize(){const e={top:this.modalParts.fullNode.getBoundingClientRect().top,right:this.modalParts.fullNode.getBoundingClientRect().right,bottom:this.modalParts.fullNode.getBoundingClientRect().bottom,left:this.modalParts.fullNode.getBoundingClientRect().left},t=()=>{e.top=this.modalParts.fullNode.getBoundingClientRect().top,e.right=this.modalParts.fullNode.getBoundingClientRect().right,e.bottom=this.modalParts.fullNode.getBoundingClientRect().bottom,e.left=this.modalParts.fullNode.getBoundingClientRect().left},i=t=>{const i=e.bottom-t.clientY;this.modalParts.fullNode.style.top=t.clientY+"px",this.modalParts.fullNode.style.height=i+"px"},s=t=>{const i=t.clientY-e.top;this.modalParts.fullNode.style.top=e.top+"px",this.modalParts.fullNode.style.height=i+"px"},o=t=>{const i=t.clientX-e.left;this.modalParts.fullNode.style.left=e.left+"px",this.modalParts.fullNode.style.width=i+"px"},a=t=>{const i=e.right-t.clientX;this.modalParts.fullNode.style.left=t.clientX+"px",this.modalParts.fullNode.style.width=i+"px"},n=()=>{t(),document.removeEventListener("mousemove",i),document.removeEventListener("mousemove",s),document.removeEventListener("mousemove",o),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",n)},r=e=>{t(),document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)};this.modalParts.resizeBorders.top.addEventListener("mousedown",()=>{r(i)}),this.modalParts.resizeBorders.bottom.addEventListener("mousedown",()=>{r(s)}),this.modalParts.resizeBorders.right.addEventListener("mousedown",()=>{r(o)}),this.modalParts.resizeBorders.left.addEventListener("mousedown",()=>{r(a)})}bindDrag(){const e={x:0,y:0},t={x:0,y:0},i=i=>{i.preventDefault(),t.x=e.x-i.clientX,t.y=e.y-i.clientY,e.x=i.clientX,e.y=i.clientY,this.modalParts.fullNode.style.left=this.modalParts.fullNode.offsetLeft-t.x+"px",this.modalParts.fullNode.style.top=this.modalParts.fullNode.offsetTop-t.y+"px"},s=()=>{document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",i)};this.modalParts.headerNode.addEventListener("mousedown",t=>{t.preventDefault(),e.x=t.clientX,e.y=t.clientY,document.addEventListener("mouseup",s),document.addEventListener("mousemove",i)})}static hotInitialize(){Q.on("click",'[data-faze="modal"]',(e,t)=>{let i=null;if(t.dataset.fazeModalHtml){const e=document.querySelector(t.dataset.fazeModalHtml);e&&(i=e.innerHTML)}new Q.Modal(t,{html:i,title:t.dataset.fazeModalTitle||"",evented:!1,draggable:"true"===t.dataset.fazeModalDraggable,resizable:"true"===t.dataset.fazeModalResizable,url:t.dataset.fazeModalUrl||"",class:t.dataset.fazeModalClass||"",additionalParams:t.dataset.fazeModalAdditionalParams||"{}"})})}};class o{static initialize(){o.bindCopyText(),o.bindMobileMask()}static bindMobileMask(){document.querySelectorAll(".faze-mask-mobile").forEach(e=>{o.mobileMask(e)})}static bindCopyText(){Q.on("click",".faze-copy-text",(e,t)=>{if(t.textContent){const i=document.createElement("input");i.value=t.dataset.fazeCopyTextValue||t.textContent||"",i.style.position="fixed",i.style.top=e.clientY+"px",i.style.left=e.clientX+"px",i.style.opacity="0",document.body.appendChild(i),i.focus(),i.select(),document.execCommand("copy"),i.remove();const s=document.createElement("div");s.className="faze-notification",s.textContent="Скопировано!",t.appendChild(s),t.classList.add("faze-active"),setTimeout(()=>{s.remove(),t.classList.remove("faze-active")},3e3)}})}static loadJS(e){return new Promise((t,i)=>{const s=document.createElement("script");document.body.appendChild(s),s.src=e,s.async=!0,s.onload=t,s.onerror=i})}static activateItem(e,t,i="active"){e.forEach((e,s)=>{t===s?e.classList.add(i):e.classList.remove(i)})}static numberWithSpaces(e,t="."){const i=e.toString();let s="";if(i.includes(t)){const e=i.split(t);e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),s=e.join(t)}else s=i.replace(/\B(?=(\d{3})+(?!\d))/g," ");return s}static escapeString(e){return e.replace(/"/g,"&quot;")}static mobileMask(e){let t="";e.addEventListener("focus",i=>{0===t.length&&(t+="+7 ("),e.value=t}),e.addEventListener("input",i=>{"data"in i&&!i.data?(t=t.slice(0,-1),t.length<=4&&(t="+7 (")):["0","1","2","3","4","5","6","7","8","9"].includes(i.data)&&t.length<18&&(t+=i.data,7===t.length?t+=") ":12!==t.length&&15!==t.length||(t+="-")),e.value=t})}static showNotification(e,t){const{className:i="",isNested:s=!0,time:o=3e3,backgroundColor:a="#00b938"}=t;let n=document.querySelector(".faze-notification-wrapper");n||(n=document.createElement("div"),n.className="faze-notification-wrapper",document.body.appendChild(n));const r=document.createElement("div");r.className="faze-notification "+i,r.innerHTML=e,r.style.backgroundColor=a,s||(n.innerHTML=""),n.appendChild(r),setTimeout(()=>{r.remove(),n&&0===n.querySelectorAll(".faze-notification").length&&n.remove()},o)}static wordEnd(e,t=["","а","ов"]){return t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]}static secondsToTime({totalSeconds:e=0,showEmpty:t=!1,showHours:i=!0,showMinutes:s=!0,showSeconds:a=!0}={}){let n=e,r="";const d=Math.floor(n/3600);n%=3600;const l=Math.floor(n/60),h=n%60;return(0!==d||t)&&i&&(r+=`${d} час${o.wordEnd(d,["","а","ов"])} `),(0!==l||t)&&s&&(r+=`${l} минут${o.wordEnd(l,["а","ы",""])} `),(0!==h||t)&&a&&(r+=`${h} секунд${o.wordEnd(h,["а","ы",""])}`),r}static isCheckboxChecked(e,t=document){return t.querySelectorAll('input[type="checkbox"]:checked').length>0}static isRadioChecked(e,t=document){return t.querySelectorAll('input[type="radio"]:checked').length>0}static setCookie(e,t,i,s=!1){let o="";if(i){const e=new Date;e.setTime(e.getTime()+24*i*60*60*1e3),o=";expires="+e.toUTCString()}document.cookie=`${e}=${s?encodeURIComponent(t):t}${o};path=/`}static getCookie(e){const t=e+"=",i=document.cookie.split(";");for(let e=0;e<i.length;e+=1){let s=i[e];for(;" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return""}static isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}static removeArrays(e){for(const t in e)e.hasOwnProperty(t)&&(Array.isArray(e[t])?e[t]=[]:o.isObject(e[t])&&o.removeArrays(e[t]));return e}static mergeDeep(e=!1,t,...i){if(!i.length)return t;const s=i.shift();if(o.isObject(t)&&o.isObject(s))for(const i in s)if(s.hasOwnProperty(i))if(o.isObject(s[i]))t[i]||Object.assign(t,{[i]:{}}),o.mergeDeep(e,t[i],s[i]);else if(Array.isArray(t[i])||s[i]&&s[i][0]&&void 0!==s[i][0].__group)if(t[i]||(t[i]=[],t[i].push(...s[i])),void 0!==s[i][0].__group){const e=t[i].find(e=>e.__group===s[i][0].__group),o=t[i].indexOf(e);-1===o?t[i].push(s[i][0]):t[i][o]=Object.assign(Object.assign({},e),s[i][0])}else e?t[i]=s[i]:t[i].push(...s[i]);else Object.assign(t,{[i]:s[i]});return o.mergeDeep(e,t,...i)}static objectFromString(e={},t,i,s,a="default"){const n=t.split(".").filter(e=>0!==e.length),r={};let d=r;if(n.length>0)for(let e=0;e<n.length;e+=1)d[n[e]]={},d=d[n[e]];if(i.includes("[]")){const e=i.replace("[]","");if(i.includes(".")){const t=i.split(".")[1];d[e.split(".")[0]]=[{__group:a,[t]:s}]}else d[e]=[s]}else d[i]=s;return o.mergeDeep(!1,e,r)}static isMouseOver(e,t,i={vertical:!1,horizontal:!1}){const s=t.getBoundingClientRect();let{x:o,y:a}=this.getMouseOrTouchPosition(e);const n={contains:o>s.left&&o<s.left+s.width&&a>s.top&&a<s.top+s.height,sides:{top:void 0,bottom:void 0,left:void 0,right:void 0}};if(i.vertical){const e=s.height/2,t=o>s.left&&o<s.left+s.width;n.sides.top=a>s.top&&a<s.top+e&&t,n.sides.bottom=a>s.top+e&&a<s.top+s.height&&t}if(i.horizontal){const e=s.width/2,t=a>s.top&&a<s.top+s.height;n.sides.left=o>s.left&&o<s.left+e&&t,n.sides.right=o>s.left+e&&o<s.left+s.width&&t}return n}static getMouseOrTouchPosition(e){const t={x:0,y:0};return e instanceof MouseEvent?(t.x=e.clientX,t.y=e.clientY):(t.x=e.changedTouches[0].clientX,t.y=e.changedTouches[0].clientY),t}static isMouseOverlapsNode(e,t){const i=e.path||e.composedPath&&e.composedPath();return!(!i||!i.find(e=>e===t))}static isMouseOverlapsNodes(e,t){const i=e.path||e.composedPath&&e.composedPath();return!(!i||!i.find(e=>Array.from(t).some(t=>t===e)))}static setElementStyle(e,t){for(const i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])}static setElementAttributes(e,t){for(const i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])}static createElement(e,t,i,s){const o=document.createElement(e);return t&&this.setElementAttributes(o,t),i&&this.setElementStyle(o,i),s&&s.appendChild(o),o}static getElementPosition(e,t={x:0,y:0}){const i={x:e.offsetLeft-t.x,y:e.offsetTop-t.y};let s=e;for(;s.offsetParent;)s=s.offsetParent,i.x+=s.offsetLeft,i.y+=s.offsetTop,s!==document.body&&s!==document.documentElement&&(i.x-=s.scrollLeft,i.y-=s.scrollTop);return i}static getElementPositionAndSize(e,t={width:0,height:0},i={x:0,y:0}){return{size:{width:e.getBoundingClientRect().width+t.width,height:e.getBoundingClientRect().height+t.height},position:this.getElementPosition(e,i)}}static getElementRealSize(e,t){var i;const s=e.cloneNode(!0);s.style.cssText="position:fixed; top:-9999px; opacity:0;",document.body.appendChild(s);const o={width:0,height:0};if(t){const e=s.querySelector(t);e&&(o.width=e.clientWidth,o.height=e.clientHeight)}else o.width=s.clientWidth,o.height=s.clientHeight;return null===(i=s.parentNode)||void 0===i||i.removeChild(s),o}static bindDrag(e){var t;let i={x:0,y:0};const s={x:0,y:0},o={x:0,y:0},a=t=>{if(e.node&&(t.preventDefault(),t.stopPropagation(),o.x=s.x-t.clientX,o.y=s.y-t.clientY,s.x=t.clientX,s.y=t.clientY,e.node.style.left=parseInt(e.node.style.left,10)-o.x+"px",e.node.style.top=parseInt(e.node.style.top,10)-o.y+"px","function"==typeof e.callbacks.drag))try{e.callbacks.drag()}catch(e){console.error('Ошибка исполнения пользовательского метода "drag":',e)}},n=t=>{if(e.node&&(t.preventDefault(),t.stopPropagation(),document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",a),e.node.classList.remove("faze-drag-active"),"function"==typeof e.callbacks.afterDrag))try{e.callbacks.afterDrag({startPosition:i,event:t})}catch(e){console.error('Ошибка исполнения пользовательского метода "afterDrag":',e)}};null===(t=e.node)||void 0===t||t.addEventListener("mousedown",t=>{if(e.node){if(t.preventDefault(),t.stopPropagation(),i={x:parseInt(e.node.style.left,10),y:parseInt(e.node.style.top,10)},e.node.classList.add("faze-drag-active"),s.x=t.clientX,s.y=t.clientY,"function"==typeof e.callbacks.beforeDrag)try{e.callbacks.beforeDrag()}catch(e){console.error('Ошибка исполнения пользовательского метода "beforeDrag":',e)}document.addEventListener("mouseup",n),document.addEventListener("mousemove",a)}})}static changeImage(e,t){return new Promise((i,s)=>{const o=new Image;o.src=e,o.onload=()=>{t.src=e,i({width:o.width,height:o.height})},o.onerror=e=>s(e)})}static fromPositionAndSizeToStyles(e){const t={};return t.width=e.size.width+"px",t.height=e.size.height+"px",t.left=e.position.x+"px",t.top=e.position.y+"px",t}static fromPositionToStyles(e){const t={};return t.left=e.x+"px",t.top=e.y+"px",t}static fromSizeToStyles(e){const t={};return t.width=e.width+"px",t.height=e.height+"px",t}static comparePositions(e,t){return e.x===t.x&&e.y===t.y}static compareSizes(e,t){return e.width===t.width&&e.height===t.height}static isElementInViewport(e,t=0,i=!1){const s=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,a=e.getBoundingClientRect(),n=a.top-t<=s&&(!!i||a.top+a.height>=0),r=a.left-t<=o&&(!!i||a.left+a.width>=0);return n&&r}static isElementsInViewport(e,t=0,i=!1){const s=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth;return Array.from(e).filter(e=>{const a=e.getBoundingClientRect(),n=a.top-t<=s&&(!!i||a.top+a.height>=0),r=a.left-t<=o&&(!!i||a.left+a.width>=0);return n&&r})}static transliterate(e){const t={"Ё":"YO","Й":"I","Ц":"TS","У":"U","К":"K","Е":"E","Н":"N","Г":"G","Ш":"SH","Щ":"SCH","З":"Z","Х":"H","Ъ":"'","ё":"yo","й":"i","ц":"ts","у":"u","к":"k","е":"e","н":"n","г":"g","ш":"sh","щ":"sch","з":"z","х":"h","ъ":"'","Ф":"F","Ы":"I","В":"V","А":"a","П":"P","Р":"R","О":"O","Л":"L","Д":"D","Ж":"ZH","Э":"E","ф":"f","ы":"i","в":"v","а":"a","п":"p","р":"r","о":"o","л":"l","д":"d","ж":"zh","э":"e","Я":"Ya","Ч":"CH","С":"S","М":"M","И":"I","Т":"T","Ь":"'","Б":"B","Ю":"YU","я":"ya","ч":"ch","с":"s","м":"m","и":"i","т":"t","ь":"'","б":"b","ю":"yu"};return e.split("").map((function(e){return t[e]||e})).join("")}static parseJSON(e){let t={};try{t=JSON.parse(e)}catch(e){console.error(e)}return t}static isSelectorValid(e){try{document.createDocumentFragment().querySelector(e)}catch(e){return!1}return!0}}const a=o;var n;!function(e){e.Date=class{static getDayOfWeek(e,t=!1){let i;switch(e){case 0:i=t?"Пн":"Понедельник";break;case 1:i=t?"Вт":"Вторник";break;case 2:i=t?"Ср":"Среда";break;case 3:i=t?"Чт":"Четверг";break;case 4:i=t?"Пт":"Пятница";break;case 5:i=t?"Сб":"Суббота";break;case 6:i=t?"Вс":"Воскресенье";break;default:throw i="",new Error("Несуществующий индекс дня недели!")}return i}static getMonth(e,t=!1){let i;switch(e){case 0:i=t?"Января":"Январь";break;case 1:i=t?"Февраля":"Февраль";break;case 2:i=t?"Марта":"Март";break;case 3:i=t?"Апреля":"Апрель";break;case 4:i=t?"Мая":"Май";break;case 5:i=t?"Июня":"Июнь";break;case 6:i=t?"Июля":"Июль";break;case 7:i=t?"Августа":"Август";break;case 8:i=t?"Сентября":"Сентябрь";break;case 9:i=t?"Октября":"Октябрь";break;case 10:i=t?"Ноября":"Ноябрь";break;case 11:i=t?"Декабря":"Декабрь";break;default:throw i="",new Error("Несуществующий индекс месяца!")}return i}}}(n||(n={}));const r=n.Date;const d=class{static animate(e){return new Promise(t=>{e.node.style.transition=e.transition||"all 2s",Q.Helpers.setElementStyle(e.node,e.from),setTimeout(()=>{Q.Helpers.setElementStyle(e.node,e.to)},100),setTimeout(()=>{t(e.rawTo||e.to)},e.time)})}static animatePositionAndSize(e){return this.animate({node:e.node,from:Q.Helpers.fromPositionAndSizeToStyles(e.from),to:Q.Helpers.fromPositionAndSizeToStyles(e.to),rawTo:e.to,time:e.time,transition:"width 0.5s, height 0.5s, left 0.5s, top 0.5s"})}static animatePosition(e){return this.animate({node:e.node,from:Q.Helpers.fromPositionToStyles(e.from),to:Q.Helpers.fromPositionToStyles(e.to),rawTo:e.to,time:e.time,transition:"left 0.5s, top 0.5s"})}static animateSize(e){return this.animate({node:e.node,from:Q.Helpers.fromSizeToStyles(e.from),to:Q.Helpers.fromSizeToStyles(e.to),rawTo:e.to,time:e.time,transition:"width 0.5s, height 0.5s"})}static smoothBetween(e,t,i,s,o){let a,n;window.requestAnimationFrame((function r(d){a||(a=d);let l=d-a;l<i?(n=e>t||e<0?e+l/i*(t-e):l/i*(t-e),Q.callFunction(()=>{s(n)},"Animations"),window.requestAnimationFrame(r)):(n=t,Q.callFunction(()=>{s(n)},"Animations"),o&&Q.callFunction(()=>{o(n)},"Animations"))}))}};class l{constructor(e,i){if(!e)throw new Error("Не задан объект у которого должен отображаться тултип.");if(this.logger=new t("Модуль Faze.Tooltip:"),e.classList.contains("faze-tooltip-initialized"))return void this.logger.warning("Плагин уже был инициализирован на этот DOM элемент:",e);const s={text:"",side:"bottom",margin:10,class:"",event:"mouseenter",dynamicUpdate:!1,callbacks:{opened:void 0}};this.config=Object.assign(s,i),["top","bottom","right","left"].includes(this.config.side)||this.logger.error('Параметр "side" задан верно! Корректные значения: "top", "right", "bottom", "left".'),this.node=e,this.tooltipNode=document.createElement("div"),this.initialize(),this.bind()}initialize(){this.tooltipNode.className=`faze-tooltip faze-tooltip-initialized faze-tooltip-${this.config.side} ${this.config.class}`,this.tooltipNode.style.visibility="hidden",this.tooltipNode.innerHTML=this.config.text||this.node.dataset.fazeTooltipText||this.node.title||""}bind(){document.addEventListener("click",e=>{const t=e.path||e.composedPath&&e.composedPath();t&&(t.find(e=>e===this.tooltipNode||e===this.node)||this.hide())}),"mouseenter"===this.config.event?(this.node.addEventListener("mouseenter",()=>{this.show()}),this.node.addEventListener("mouseleave",()=>{this.hide()})):"click"===this.config.event&&this.node.addEventListener("click",()=>{this.toggle()})}show(){if("true"!==this.node.dataset.fazeTooltipDisabled&&(this.config.dynamicUpdate&&this.updateText(),this.tooltipNode.style.visibility="hidden",document.body.appendChild(this.tooltipNode),this.calculatePositionAndSize(),this.tooltipNode.style.visibility="visible","function"==typeof this.config.callbacks.opened))try{this.config.callbacks.opened()}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "opened": '+e)}}hide(){this.tooltipNode.style.visibility="hidden",this.tooltipNode.remove()}toggle(){"visible"===this.tooltipNode.style.visibility?this.hide():this.show()}updateText(){this.tooltipNode.innerHTML=this.node.dataset.fazeTooltipText||this.node.title||""}calculatePositionAndSize(){const e=this.node.getBoundingClientRect(),t=this.tooltipNode.getBoundingClientRect(),i=e.width/2+t.width/2+this.config.margin,s=e.height/2+t.height/2+this.config.margin,{documentElement:o}=document;let a=0,n=0;o&&(a=(window.pageXOffset||o.scrollLeft)-(o.clientLeft||0),n=(window.pageYOffset||o.scrollTop)-(o.clientTop||0));let r=e.left+e.width/2-t.width/2+a,d=e.top+e.height/2-t.height/2+n;switch(this.config.side){case"top":d-=s;break;case"left":r-=i;break;case"right":r+=i;break;case"bottom":default:d+=s}this.tooltipNode.style.top=d+"px",this.tooltipNode.style.left=r+"px"}static initializeByDataAttributes(e){new Q.Tooltip(e,{text:e.dataset.fazeTooltipText||"",side:e.dataset.fazeTooltipSide||e.dataset.fazeTooltipAlign||"bottom",class:e.dataset.fazeTooltipClass||"",event:e.dataset.fazeTooltipEvent||"mouseenter",dynamicUpdate:"true"===e.dataset.fazeTooltipDynamicUpdate})}static hotInitialize(){Q.Observer.watch('[data-faze~="tooltip"]',e=>{l.initializeByDataAttributes(e)}),document.querySelectorAll('[data-faze~="tooltip"]').forEach(e=>{l.initializeByDataAttributes(e)})}}const h=l;const c=class{constructor(e){var i;this.name=e.name,this.logger=new t(`Модуль Faze.${this.name}:`),e.node||this.logger.error("Не задан основной DOM элемент модуля"),this.node=e.node,this.config=e.config;const s=null===(i=e.node)||void 0===i?void 0:i.className;this.className=s?"."+s.replace(" ","."):void 0,this.initialize(),this.build(),this.bind()}initialize(){this.node.classList.add("faze-"+this.name.toLowerCase()),this.node.classList.add(`faze-${this.name.toLowerCase()}-initialized`)}build(){}bind(){}static initializeByDataAttributes(e){}static hotInitialize(e){Q.Observer.watch(`[data-faze~="${e}"]`,e=>{this.initializeByDataAttributes(e)}),document.querySelectorAll(`[data-faze~="${e}"]`).forEach(e=>{this.initializeByDataAttributes(e)})}};class f extends c{constructor(e,t){const i={headerActiveClass:void 0,useHash:!1,callbacks:{changed:void 0}};super({node:e,config:Object.assign(i,t),name:"Tab"})}initialize(){let e;super.initialize(),this.initializeTabs();const t=Array.from(this.headersNodes).find(e=>e.classList.contains("faze-active"));e=t?t.dataset.fazeTabHead||t.dataset.fazeTabBody||"":this.headersNodes[0].dataset.fazeTabHead||this.headersNodes[0].dataset.fazeTabBody||"",this.config.useHash&&window.location.hash&&(e=window.location.hash.substring(1)),this.activateTab(e)}bind(){super.bind(),this.headersNodes.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this.activateTab(e.dataset.fazeTabHead||e.dataset.fazeTabBody||"")})})}initializeTabs(){const e=this.className?", "+this.className:"";this.headersNodes=Array.from(this.node.querySelectorAll('.faze-tab-header, [data-faze-tab="header"], [data-faze-tab-head]')).filter(t=>t.closest('.faze-tabs, [data-faze~="tab"] '+e)===this.node),this.bodiesNodes=Array.from(this.node.querySelectorAll('.faze-tab-body, [data-faze-tab="body"], [data-faze-tab-body]:not([data-faze-tab="header"]):not(.faze-tab-header)')).filter(t=>t.closest('.faze-tabs, [data-faze~="tab"] '+e)===this.node)}activateTab(e){let t,i;this.headersNodes.forEach(i=>{const s=e===i.dataset.fazeTabBody||e===i.dataset.fazeTabHead;i.classList.toggle("faze-active",s),this.config.headerActiveClass&&i.classList.toggle(this.config.headerActiveClass,s),s&&(t=i)});const s=e.split(" ");if(this.bodiesNodes.forEach(e=>{const t=s.includes(e.dataset.fazeTabBody||"");e.style.display=t?"block":"none",e.classList.toggle("faze-active",t),t&&(i=e)}),this.config.useHash&&(window.location.hash=e),"function"==typeof this.config.callbacks.changed)try{this.config.callbacks.changed({headNode:t,bodyNode:i})}catch(e){console.error('Ошибка исполнения пользовательского метода "opened": '+e)}}static initializeByDataAttributes(e){new f(e,{headerActiveClass:e.dataset.fazeTabHeaderActiveClass,useHash:"true"===(e.dataset.fazeTabUseHash||"false")})}}const u=f;var p;!function(e){e.horizontal="horizontal",e.vertical="vertical"}(p||(p={}));class g{constructor(e,i){if(!e)return this.logger.error("Не заданы объекты контейнеров элементов для перетаскивания");e instanceof HTMLElement?this.nodes=[e]:this.nodes=[...Array.from(e)],this.logger=new t("Модуль Faze.Drag:");const s=this.nodes.find(e=>e.classList.contains("faze-drag-initialized"));if(s)return void(s.dataset.fazeDragGroup||this.logger.warning("Плагин уже был инициализирован на этот DOM элемент:",s));const o={direction:p.vertical,phantomElementTag:"div",callbacks:{created:void 0,changed:void 0}};this.config=Object.assign(o,i),this.itemsNodes=[],this.nodes.forEach(e=>{this.itemsNodes.push(...Array.from(e.querySelectorAll('.faze-drag-item, [data-faze-drag="item"]')))}),this.dragItemNode=void 0,this.initialize(),this.bind()}initialize(){if(this.nodes.forEach(e=>{e.classList.add("faze-drag"),e.classList.add("faze-drag-initialized")}),this.initializeItemsIndexes(),this.initializeItemsPositions(),"function"==typeof this.config.callbacks.created)try{this.config.callbacks.created({containerNodes:this.nodes,itemsNodes:this.itemsNodes})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "created": '+e)}}initializeItemsIndexes(){this.itemsNodes.forEach((e,t)=>{e.dataset.fazeDragIndex=t.toString()})}initializeItemsPositions(){this.itemsNodes.forEach(e=>{const t=window.getComputedStyle(e);e.dataset.fazeDragItemPositionX=(e.offsetLeft-parseInt(t.marginLeft,10)).toString(),e.dataset.fazeDragItemPositionY=(e.offsetTop-parseInt(t.marginTop,10)).toString()})}bind(){this.itemsNodes.forEach(e=>{const t=e.querySelector('.faze-drag-handle, [data-faze-drag="handle"]')||e;this.bindDrag(t,e)})}bindDrag(e,t){const i={x:0,y:0},s={x:0,y:0},o={width:t.style.width,height:t.style.height,position:t.style.position,top:t.style.top,left:t.style.left},a=window.getComputedStyle(t,null),n=t.getBoundingClientRect().width,r=t.getBoundingClientRect().height,d=document.createElement(this.config.phantomElementTag);d.className="faze-drag-item-phantom",d.style.width=n+"px",d.style.height=r+"px",d.style.marginTop=a.marginTop,d.style.marginBottom=a.marginBottom,d.style.marginLeft=a.marginLeft,d.style.marginRight=a.marginRight;const l=e=>{e.preventDefault(),s.x=i.x-e.clientX,s.y=i.y-e.clientY,i.x=e.clientX,i.y=e.clientY;const o=parseInt(t.dataset.fazeDragItemPositionX||"0",10)-s.x;t.style.left=o+"px",t.dataset.fazeDragItemPositionX=o.toString();const a=parseInt(t.dataset.fazeDragItemPositionY||"0",10)-s.y;if(t.style.top=a+"px",t.dataset.fazeDragItemPositionY=a.toString(),Array.from(this.itemsNodes).filter(e=>!e.classList.contains("faze-drag-item-moving")).forEach(t=>{const i=Q.Helpers.isMouseOver(e,t,{horizontal:!0,vertical:!0});t.parentNode&&(this.config.direction===p.horizontal?i.sides.right?t.parentNode.insertBefore(d,t.nextSibling):i.sides.left&&t.parentNode.insertBefore(d,t):i.sides.bottom?t.parentNode.insertBefore(d,t.nextSibling):i.sides.top&&t.parentNode.insertBefore(d,t))}),"function"==typeof this.config.callbacks.drag)try{this.config.callbacks.drag({containerNodes:this.nodes,itemsNodes:this.itemsNodes})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "drag": '+e)}},h=()=>{if(d.parentNode&&d.parentNode.insertBefore(t,d.nextSibling),t.classList.remove("faze-drag-item-moving"),t.style.width=o.width,t.style.height=o.height,t.style.position=o.position,t.style.top=o.top,t.style.left=o.left,d.remove(),this.initializeItemsIndexes(),this.initializeItemsPositions(),document.removeEventListener("mouseup",h),document.removeEventListener("mousemove",l),"function"==typeof this.config.callbacks.changed)try{this.config.callbacks.changed({containerNodes:this.nodes,itemsNodes:this.itemsNodes})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "changed": '+e)}if("function"==typeof this.config.callbacks.afterDrag)try{this.config.callbacks.afterDrag({containerNodes:this.nodes,itemsNodes:this.itemsNodes})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "beforeDragged": '+e)}};e.addEventListener("mousedown",e=>{if(e.preventDefault(),i.x=e.clientX,i.y=e.clientY,t.style.position="absolute",t.style.width=n+"px",t.style.height=r+"px",t.style.left=t.dataset.fazeDragItemPositionX+"px",t.style.top=t.dataset.fazeDragItemPositionY+"px",t.classList.add("faze-drag-item-moving"),t.parentNode&&t.parentNode.insertBefore(d,t.nextSibling),document.addEventListener("mouseup",h),document.addEventListener("mousemove",l),"function"==typeof this.config.callbacks.beforeDrag)try{this.config.callbacks.beforeDrag({containerNodes:this.nodes,itemsNodes:this.itemsNodes})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "beforeDragged": '+e)}})}static initializeByDataAttributes(e){const t=e.dataset.fazeDragGroup,i=t?Array.from(document.querySelectorAll(`[data-faze~="drag"][data-faze-drag-group=${t}]`)):[e];new Q.Drag(i,{direction:"horizontal"===e.dataset.fazeDragDirection?p.horizontal:p.vertical,phantomElementTag:e.dataset.fazeDragPhantomElementTag||"div"})}static hotInitialize(){Q.Observer.watch('[data-faze~="drag"]',e=>{g.initializeByDataAttributes(e)}),document.querySelectorAll('[data-faze~="drag"]').forEach(e=>{g.initializeByDataAttributes(e)})}}const m=g;class b{constructor(e,i){if(this.logger=new t("Модуль Faze.Dropdown:"),!e)return this.logger.error("Не задан объект дропдауна");if(e.classList.contains("faze-dropdown-initialized"))return void this.logger.warning("Плагин уже был инициализирован на этот DOM элемент:",e);const s={positionTopOffset:0,strictPosition:!1,callbacks:{created:void 0,opened:void 0}};this.config=Object.assign(s,i),this.node=e,this.initialize(),this.bind()}initialize(){if(this.node.classList.add("faze-dropdown"),this.node.classList.add("faze-dropdown-initialized"),this.title=this.node.querySelector('.faze-title, [data-faze-dropdown="title"]'),this.body=this.node.querySelector('.faze-body, [data-faze-dropdown="body"]'),!this.title||!this.body)return this.logger.error("Для дропдауна не найдены шапка и тело");let e=this.title.offsetHeight+this.config.positionTopOffset;if(this.config.strictPosition){const t=this.node.getBoundingClientRect(),{documentElement:i}=document;i&&(e+=(window.pageYOffset||i.scrollTop)+t.top)}if(this.body.style.top=e+"px",this.resetTitle(),"function"==typeof this.config.callbacks.created)try{this.config.callbacks.created({title:this.title,body:this.body})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "created": '+e)}}bind(){if(!this.title||!this.body)return this.logger.error("Не заданы шапка и тело дропдауна");this.title.addEventListener("click",()=>{if(this.node.classList.toggle("faze-active"),this.node.classList.contains("faze-active")&&"function"==typeof this.config.callbacks.opened)try{this.config.callbacks.opened({title:this.title,body:this.body})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "opened": '+e)}}),document.addEventListener("click",e=>{const t=e.path||e.composedPath&&e.composedPath();t&&(t.find(e=>e===this.node)||this.node.classList.remove("faze-active"))})}resetTitle(){if(!this.title)return this.logger.error("Не задана шапка дропдауна");const e=this.title.cloneNode(!0);this.title.parentNode&&(this.title.parentNode.replaceChild(e,this.title),this.title=e)}static initializeByDataAttributes(e){new Q.Dropdown(e,{strictPosition:"true"===(e.dataset.fazeDropdownStrictPosition||"false"),positionTopOffset:parseInt(e.dataset.fazeDropdownPositionTopOffset||"0",10)})}static hotInitialize(){Q.Observer.watch('[data-faze~="dropdown"]',e=>{b.initializeByDataAttributes(e)}),document.querySelectorAll('[data-faze~="dropdown"]').forEach(e=>{b.initializeByDataAttributes(e)})}}const N=b;class y{constructor(e,i){if(!e)throw new Error("Не задан объект селекта!");if(this.logger=new t("Модуль Faze.Select:"),e.classList.contains("faze-select-initialized"))return void this.logger.warning("Плагин уже был инициализирован на этот DOM элемент:",e);const s={name:e.dataset.fazeSelectName,default:!0,positionTopOffset:0,callbacks:{created:void 0,changed:void 0,opened:void 0}};this.config=Object.assign(Object.assign({},s),i),this.node=e,this.config.default&&(this.initialOptionNode=document.createElement("div")),this.config.name&&(this.valueInputNode=document.createElement("input")),this.initialize(),this.bind()}initialize(){if(this.node.classList.add("faze-select"),this.titleNode=this.node.querySelector(".faze-title"),this.bodyNode=this.node.querySelector(".faze-body"),!this.titleNode||!this.bodyNode)return this.logger.error("Для селекта не найдены шапка и тело!");if(this.config.default)this.initialOptionNode.className="faze-option",this.initialOptionNode.dataset.fazeSelectValue="FAZE_INITIAL_TITLE",this.initialOptionNode.textContent=this.titleNode.textContent,this.initialOptionNode.style.display="none",this.bodyNode.insertBefore(this.initialOptionNode,this.bodyNode.firstChild),this.optionsNodes=this.bodyNode.querySelectorAll(".faze-option");else{const e=this.bodyNode.querySelector(".faze-option:first-child");e&&(this.titleNode.textContent=e.getAttribute("data-faze-caption")||e.textContent,this.value=e.dataset.fazeSelectValue||e.textContent,this.optionsNodes=this.bodyNode.querySelectorAll(".faze-option"),this.hideOption(this.value))}if(this.bodyNode.style.top=this.titleNode.offsetHeight+this.config.positionTopOffset+"px",this.resetTitle(),this.valueInputNode&&(this.valueInputNode.type="hidden",this.valueInputNode.name=this.config.name||"",this.valueInputNode.value=this.value||"",this.node.appendChild(this.valueInputNode)),this.setValue(this.node.dataset.fazeSelectInitialValue||""),"function"==typeof this.config.callbacks.created)try{this.config.callbacks.created({title:this.titleNode,body:this.bodyNode,value:this.value})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "created", дословно: '+e)}}bind(){if(!this.titleNode||!this.bodyNode)return this.logger.error("Не заданы шапка и тело селекта");this.resetTitle(),this.titleNode.addEventListener("click",e=>{if(e.preventDefault(),this.node.classList.contains("faze-disabled")||this.node.classList.toggle("faze-active"),this.node.classList.contains("faze-active")&&"function"==typeof this.config.callbacks.opened)try{this.config.callbacks.opened({title:this.titleNode,body:this.bodyNode,value:this.value})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "opened", дословно: '+e)}}),this.optionsNodes.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=e.dataset.fazeSelectValue?e.dataset.fazeSelectValue||"":e.textContent||"";if(this.setValue(i),"function"==typeof this.config.callbacks.changed)try{this.config.callbacks.changed({title:this.titleNode,body:this.bodyNode,value:this.value,selectedOption:e})}catch(e){console.error('Ошибка исполнения пользовательского метода "changed":',e)}})}),document.addEventListener("click",e=>{const t=e.path||e.composedPath&&e.composedPath();t&&(t.find(e=>e===this.node)||this.node.classList.remove("faze-active"))})}setValue(e){if(!this.titleNode)return this.logger.error("Не задана шапка селекта");const t=Array.from(this.optionsNodes).find(t=>t.dataset.fazeSelectValue===e||t.textContent===e);t&&(this.titleNode.textContent=t.dataset.caption||t.textContent,this.value=t.dataset.fazeSelectValue||t.textContent,this.node.classList.remove("faze-active"),this.hideOption(this.value),this.valueInputNode&&(this.valueInputNode.value=this.value||""))}resetTitle(){if(!this.titleNode)return this.logger.error("Не задана шапка дропдауна");const e=this.titleNode.cloneNode(!0);this.titleNode.parentNode&&(this.titleNode.parentNode.replaceChild(e,this.titleNode),this.titleNode=e)}hideOption(e){this.optionsNodes.forEach(t=>{const i=t.dataset.fazeSelectValue||t.textContent;t.style.display=i===e?"none":"block"})}static initializeByDataAttributes(e){new Q.Select(e,{name:e.dataset.fazeSelectName,default:"true"===(e.dataset.fazeSelectDefault||"false"),positionTopOffset:parseInt(e.dataset.fazeSelectPositionTopOffset||"0",10)})}static hotInitialize(){Q.Observer.watch('[data-faze~="select"]',e=>{y.initializeByDataAttributes(e)}),document.querySelectorAll('[data-faze~="select"]').forEach(e=>{y.initializeByDataAttributes(e)})}}const z=y;class w{constructor(e,i){if(!e)throw new Error("Не задан объект карусели");if(this.logger=new t("Модуль Faze.Carousel:"),e.classList.contains("faze-carousel-initialized"))return void this.logger.warning("Плагин уже был инициализирован на этот DOM элемент:",e);const s={autoplay:!1,counter:!1,pages:!1,arrows:!0,duration:3e3,infinite:!0,useSlideFullSize:!1,stopOnHover:!1,mouseMove:!1,touchMove:!1,amountPerSlide:1,disallowRanges:[],templates:{page:""},animation:{type:"fade",time:1e3,direction:"horizontal"},selectors:{arrowLeft:void 0,arrowRight:void 0},callbacks:{created:void 0,beforeChanged:void 0,changed:void 0,afterChanged:void 0}};if(this.config=Object.assign(s,i),this.node=e,this._checkDisallowRanges()){if(this.slidesNodes=Array.from(this.node.children),this.totalSlides=this.slidesNodes.length,this.itemsHolderNode=document.createElement("div"),this.controlsNode=document.createElement("div"),this.touchStart={x:0,y:0},this.touchEnd={x:0,y:0},this.config.pages&&(this.pagesNode=document.createElement("div")),this.config.arrows)if(this.arrowsNode=document.createElement("div"),this.config.selectors.arrowLeft&&this.config.selectors.arrowRight){const e=document.querySelector(this.config.selectors.arrowLeft),t=document.querySelector(this.config.selectors.arrowRight);e&&t?this.arrowsNodes={left:e,right:t}:this.config.arrows=!1}else this.arrowsNodes={left:document.createElement("div"),right:document.createElement("div")};this.config.counter&&(this.counterNode=document.createElement("div")),this.transitionDuration=this.config.animation.time/1e3+"s",this.isIdle=!0,this.initialize(),this.bind(),this.calculateSlideSize()}}initialize(){if(this.node.classList.add("faze-carousel-initialized"),this.index=0,this.itemsHolderNode.className="faze-carousel-holder",this.createSlides(),this.node.appendChild(this.itemsHolderNode),this.node.classList.add("faze-carousel"),this.node.classList.add("faze-animation-"+this.config.animation.type,"faze-direction-"+this.config.animation.direction),this.itemsHolderNode.style.transitionDuration=this.transitionDuration,1!==this.config.amountPerSlide&&this.node.classList.add("faze-carousel-grouped"),"fade"===this.config.animation.type&&this.slidesNodes[0].classList.add("faze-active"),this.createControls(),this.config.infinite||this.checkBounds(),"function"==typeof this.config.callbacks.created)try{this.config.callbacks.created({holderNode:this.itemsHolderNode,carouselNode:this.node,slidesNodes:this.slidesNodes,totalSlides:this.totalSlides,index:this.index,controlsNode:this.controlsNode,counterNode:this.counterNode,arrowsNode:this.arrowsNode,arrowsNodes:this.arrowsNodes,pagesNode:this.pagesNode,currentSlideNode:this.slidesNodes[this.index]})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "created": '+e)}}bind(){this.resetInterval(),this.config.pages&&this.bindPagination(),this.config.arrows&&this.bindArrows(),this.bindGestures(),this.config.stopOnHover&&this.config.autoplay&&this.bindStopOnHover()}_checkDisallowRanges(){for(const e of this.config.disallowRanges)if(window.innerWidth>(e.from||0)&&window.innerWidth<(e.to||window.screen.width))return!1;return!0}bindStopOnHover(){this.node.addEventListener("mouseover",()=>{clearInterval(this.timer)}),this.node.addEventListener("mouseleave",()=>{this.timer=window.setInterval(()=>{this.next()},this.config.duration)})}bindPagination(){this.pagesNodes.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=e.dataset.fazeIndex;i&&this.change(parseInt(i,10))})})}bindArrows(){this.arrowsNodes.left.addEventListener("click",e=>{e.preventDefault(),this.arrowsNodes.left.classList.contains("faze-disabled")||this.prev()}),this.arrowsNodes.right.addEventListener("click",e=>{e.preventDefault(),this.arrowsNodes.right.classList.contains("faze-disabled")||this.next()})}bindGestures(){this.config.touchMove&&this.bindTouchGestures(),this.config.mouseMove&&this.bindMouseGestures()}bindMouseGestures(){let e=!1;document.body.addEventListener("mousedown",t=>{Q.Helpers.isMouseOver(t,this.node).contains&&(t.preventDefault(),e=!0,this.touchStart.x=t.clientX,this.touchStart.y=t.clientY,this.handleGesturesStart())}),document.body.addEventListener("mousemove",t=>{e&&(this.touchEnd.x=t.clientX,this.touchEnd.y=t.clientY,this.checkMoveBounds({x:this.touchStart.x-this.touchEnd.x,y:this.touchStart.y-this.touchEnd.y}),this.handleGesturesMove())}),document.body.addEventListener("mouseup",t=>{e=!1,this.touchEnd.x=t.clientX,this.touchEnd.y=t.clientY,Q.Helpers.isMouseOver(t,this.node).contains&&this.handleGesturesStop()})}bindTouchGestures(){let e=!1;this.itemsHolderNode.addEventListener("touchstart",t=>{e||(this.touchStart.x=t.changedTouches[0].screenX,this.touchStart.y=t.changedTouches[0].screenY,this.handleGesturesStart()),e=!0}),this.itemsHolderNode.addEventListener("touchmove",t=>{e&&0===t.changedTouches.length&&(this.touchEnd.x=t.changedTouches[0].screenX,this.touchEnd.y=t.changedTouches[0].screenY,this.checkMoveBounds({x:this.touchStart.x-this.touchEnd.x,y:this.touchStart.y-this.touchEnd.y}),this.handleGesturesMove())}),this.itemsHolderNode.addEventListener("touchend",t=>{e&&(this.touchEnd.x=t.changedTouches[0].screenX,this.touchEnd.y=t.changedTouches[0].screenY,this.handleGesturesStop()),e=!1})}checkMoveBounds(e){(e.x>this.slideWidth||e.x<this.slideWidth)&&(e.x=this.slideWidth)}handleGesturesStart(){this.itemsHolderNode.style.transitionDuration="",this.insertSlideBefore(),this.itemsHolderNode.style.left=-this.slideWidth+"px"}handleGesturesMove(){const e=-(this.touchStart.x-this.touchEnd.x);this.itemsHolderNode.style.left=e-this.slideWidth+"px"}handleGesturesStop(){const e=-(this.touchStart.x-this.touchEnd.x);e<-this.slideWidth/2?(this.insertSlideAfter(),this.itemsHolderNode.style.left=parseInt(this.itemsHolderNode.style.left,10)+this.slideWidth+"px",this.next()):e>this.slideWidth/2?(this.itemsHolderNode.style.transitionDuration=this.transitionDuration,this.itemsHolderNode.style.left="0",this.prev(!1)):(this.insertSlideAfter(),this.itemsHolderNode.style.left="0"),setTimeout(()=>{this.itemsHolderNode.style.transitionDuration=this.transitionDuration},100)}insertSlideBefore(){this.slidesNodes=Array.from(this.itemsHolderNode.children),this.itemsHolderNode.insertBefore(this.slidesNodes[this.slidesNodes.length-1],this.slidesNodes[0])}insertSlideAfter(){this.slidesNodes=Array.from(this.itemsHolderNode.children),this.itemsHolderNode.appendChild(this.slidesNodes[0])}createSlides(){if(1===this.config.amountPerSlide)this.slidesNodes.forEach((e,t)=>{e.dataset.fazeIndex=t.toString(),e.classList.add("faze-item"),e.style.transitionDuration=this.transitionDuration,this.itemsHolderNode.appendChild(e)});else{const e=Math.ceil(this.slidesNodes.length/this.config.amountPerSlide),t=[];for(let i=0;i<e;i+=1){const e=document.createElement("div");e.className="faze-item",e.dataset.fazeIndex=i.toString(),e.style.transitionDuration=this.transitionDuration,this.slidesNodes.slice(i*this.config.amountPerSlide,i*this.config.amountPerSlide+this.config.amountPerSlide).forEach(t=>{e.appendChild(t)}),this.itemsHolderNode.appendChild(e),t.push(e)}this.slidesNodes=t,this.totalSlides=this.slidesNodes.length}}createControls(){(this.config.arrows||this.config.pages||this.config.counter)&&(this.controlsNode.className="faze-carousel-controls",this.node.appendChild(this.controlsNode),this.config.pages&&this.createPagination(),this.config.arrows&&this.createArrows(),this.config.counter&&this.createSlidesCounter())}createPagination(){this.pagesNode||this.logger.error("Родительский элемент пагинации не найден"),this.pagesNode.className="faze-carousel-pages",this.node.appendChild(this.pagesNode);let e="";for(let t=0;t<this.totalSlides;t+=1)e+=`<div class="faze-page" data-faze-index="${t}">${this.config.templates.page}</div>`;this.pagesNode.innerHTML=e,this.pagesNodes=this.pagesNode.querySelectorAll(".faze-page"),this.controlsNode.appendChild(this.pagesNode),this.pagesNodes[0].classList.add("faze-active")}createSlidesCounter(){this.counterNode.className="faze-carousel-counter",this.changeCounter(),this.config.arrows?this.arrowsNode.insertBefore(this.counterNode,this.arrowsNodes.right):this.controlsNode.appendChild(this.counterNode)}changeCounter(){this.counterNode.innerHTML=`<span class="faze-carousel-counter-current">${this.index+1}</span> / <span class="faze-carousel-counter-total">${this.totalSlides}</span>`}createArrows(){this.arrowsNode.className="faze-carousel-arrows",this.controlsNode.appendChild(this.arrowsNode),this.config.selectors.arrowLeft&&this.config.selectors.arrowRight||(this.arrowsNodes.left.className="faze-carousel-arrow faze-carousel-arrow-prev",this.arrowsNode.appendChild(this.arrowsNodes.left),this.arrowsNodes.right.className="faze-carousel-arrow faze-carousel-arrow-next",this.arrowsNode.appendChild(this.arrowsNodes.right))}next(e=!0){e?(this.isIdle&&(this.index+=1,this.index>=this.totalSlides&&(this.index=Math.max(this.index-this.totalSlides,0))),this.changeSlide("next",1)):this.changeControls()}prev(e=!0){e?(this.isIdle&&(this.index-=1,this.index<0&&(this.index=Math.min(this.totalSlides-Math.abs(this.index),this.totalSlides-1))),this.changeSlide("prev",1)):this.changeControls()}change(e){let t,i="";if(this.index>e)i="prev";else{if(!(this.index<e))return;i="next"}t=e>this.index?e-this.index:Math.abs(this.index-e),this.index=e,this.changeSlide(i,t)}checkBounds(){0===this.index?this.arrowsNodes.left.classList.add("faze-disabled"):this.arrowsNodes.left.classList.remove("faze-disabled"),this.index===this.totalSlides-1?this.arrowsNodes.right.classList.add("faze-disabled"):this.arrowsNodes.right.classList.remove("faze-disabled")}resetInterval(){clearInterval(this.timer),this.config.autoplay&&(this.timer=window.setInterval(()=>{this.next()},this.config.duration))}changeSlide(e,t=1){this.beforeChangeCallbackCall(e),this.config.infinite||this.checkBounds(),this.resetInterval(),this.calculateSlideSize();let i=null;switch(this.config.animation.type){case"fade":this.slidesNodes.forEach((e,t)=>{this.index===t?(e.classList.add("faze-active"),i=e):e.classList.remove("faze-active")}),this.changeCallbackCall(i,e);break;case"slide":if(this.isIdle)if(this.isIdle=!1,this.slidesNodes=Array.from(this.itemsHolderNode.children),"next"===e){this.itemsHolderNode.style.transitionDuration=this.transitionDuration,"horizontal"===this.config.animation.direction?this.itemsHolderNode.style.left=`-${this.slideWidth*t}px`:"vertical"===this.config.animation.direction&&(this.itemsHolderNode.style.top=`-${this.slideHeight*t}px`);const s=this.slidesNodes[t];s&&s.classList.add("faze-next"),setTimeout(()=>{this.itemsHolderNode.style.transitionDuration="","horizontal"===this.config.animation.direction?this.itemsHolderNode.style.left="0":"vertical"===this.config.animation.direction&&(this.itemsHolderNode.style.top="0");for(let e=0;e<t;e+=1)this.itemsHolderNode.appendChild(this.slidesNodes[e]);s&&s.classList.remove("faze-next"),i=this.slidesNodes.find(e=>parseInt(e.dataset.fazeIndex||"0",10)===this.index)||this.slidesNodes[0],this.isIdle=!0,this.changeCallbackCall(i,e)},this.config.animation.time)}else if("prev"===e){for(let e=t;0!==e;e-=1)this.itemsHolderNode.insertBefore(this.slidesNodes[this.totalSlides-e],this.slidesNodes[0]);"horizontal"===this.config.animation.direction?this.itemsHolderNode.style.left=`-${this.slideWidth*t}px`:"vertical"===this.config.animation.direction&&(this.itemsHolderNode.style.top=`-${this.slideHeight*t}px`),this.itemsHolderNode.style.transitionDuration="";const s=this.slidesNodes[this.totalSlides-1];s&&s.classList.add("faze-prev"),setTimeout(()=>{"horizontal"===this.config.animation.direction?this.itemsHolderNode.style.left="0":"vertical"===this.config.animation.direction&&(this.itemsHolderNode.style.top="0"),this.itemsHolderNode.style.transitionDuration=this.transitionDuration},10),setTimeout(()=>{i=this.slidesNodes.find(e=>parseInt(e.dataset.fazeIndex||"0",10)===this.index)||this.slidesNodes[0],s&&s.classList.remove("faze-prev"),this.isIdle=!0,this.changeCallbackCall(i,e)},this.config.animation.time)}}this.changeControls(),this.afterChangeCallbackCall()}changeCallbackCall(e,t){if("function"==typeof this.config.callbacks.changed)try{this.config.callbacks.changed({direction:t,holderNode:this.itemsHolderNode,carouselNode:this.node,slidesNodes:this.slidesNodes,totalSlides:this.totalSlides,index:this.index,currentSlideNode:e,controlsNode:this.controlsNode,counterNode:this.counterNode,arrowsNode:this.arrowsNode,arrowsNodes:this.arrowsNodes,pagesNode:this.pagesNode})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "changed": '+e)}}beforeChangeCallbackCall(e){if("function"==typeof this.config.callbacks.beforeChanged){const t=this.slidesNodes.find(e=>parseInt(e.dataset.fazeIndex||"0",10)===this.index)||this.slidesNodes[0];try{this.config.callbacks.beforeChanged({direction:e,currentSlideNode:t,holderNode:this.itemsHolderNode,carouselNode:this.node,slidesNodes:this.slidesNodes,totalSlides:this.totalSlides,index:this.index,controlsNode:this.controlsNode,counterNode:this.counterNode,arrowsNode:this.arrowsNode,arrowsNodes:this.arrowsNodes,pagesNode:this.pagesNode})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "changed": '+e)}}}afterChangeCallbackCall(e){if("function"==typeof this.config.callbacks.afterChanged){const t=this.slidesNodes.find(e=>parseInt(e.dataset.fazeIndex||"0",10)===this.index)||this.slidesNodes[0];try{this.config.callbacks.afterChanged({direction:e,currentSlideNode:t,holderNode:this.itemsHolderNode,carouselNode:this.node,slidesNodes:this.slidesNodes,totalSlides:this.totalSlides,index:this.index,controlsNode:this.controlsNode,counterNode:this.counterNode,arrowsNode:this.arrowsNode,arrowsNodes:this.arrowsNodes,pagesNode:this.pagesNode})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "changed": '+e)}}}changeControls(){this.config.pages&&this.changePagination(),this.config.counter&&this.changeCounter()}changePagination(){Q.Helpers.activateItem(Array.from(this.pagesNodes),this.index,"faze-active")}calculateSlideSize(){const e=this.slidesNodes[0];if(this.config.useSlideFullSize){const t=window.getComputedStyle(e);this.slideWidth=e.offsetWidth+parseFloat(t.marginLeft||"0")+parseFloat(t.marginRight||"0"),this.slideHeight=e.offsetHeight+parseFloat(t.marginTop||"0")+parseFloat(t.marginBottom||"0")}else this.slideWidth=e.offsetWidth,this.slideHeight=e.offsetHeight}changeAnimationDirection(e){this.node.classList.remove("faze-direction-vertical"),this.node.classList.remove("faze-direction-horizontal"),this.node.classList.add("faze-direction-"+e),this.config.animation.direction=e}static initializeByDataAttributes(e){new Q.Carousel(e,{autoplay:"true"===(e.dataset.fazeCarouselAutoplay||"false"),counter:"true"===(e.dataset.fazeCarouselCounter||"false"),pages:"true"===(e.dataset.fazeCarouselPages||"false"),arrows:"true"===(e.dataset.fazeCarouselArrows||"true"),arrowsOutside:"true"===(e.dataset.fazeCarouselArrowsOutside||"true"),duration:e.dataset.fazeCarouselDuration||3e3,infinite:"true"===(e.dataset.fazeCarouselInfinite||"true"),useSlideFullSize:"true"===(e.dataset.fazeCarouselUseSlideFullSize||"false"),stopOnHover:"true"===(e.dataset.fazeCarouselStopOnHover||"false"),amountPerSlide:parseInt(e.dataset.fazeCarouselAmountPerSlide||"1",10),disallowRanges:JSON.parse(e.dataset.fazeCarouselDisallowRanges||"[]"),animation:{type:e.dataset.fazeCarouselAnimationType||"fade",time:e.dataset.fazeCarouselAnimationTime||1e3,direction:e.dataset.fazeCarouselAnimationDirection||"horizontal"},selectors:{arrowLeft:e.dataset.fazeCarouselSelectorsArrowLeft,arrowRight:e.dataset.fazeCarouselSelectorsArrowRight}})}static hotInitialize(){Q.Observer.watch('[data-faze~="carousel"]',e=>{w.initializeByDataAttributes(e)}),document.querySelectorAll('[data-faze~="carousel"]').forEach(e=>{w.initializeByDataAttributes(e)})}}const v=w;var x;!function(e){e[e.Forward=0]="Forward",e[e.Backward=1]="Backward"}(x||(x={}));class S extends c{constructor(e,t){const i={autoplay:!1,counter:!1,pages:!1,arrows:!0,duration:3e3,infinite:!0,useSlideFullSize:!1,stopOnHover:!1,mouseMove:!1,amountPerSlide:1,disallowRanges:[],animation:{type:"fade",time:1e3,direction:"horizontal"},selectors:{arrowLeft:void 0,arrowRight:void 0},callbacks:{created:void 0,beforeChanged:void 0,changed:void 0}};super({node:e,config:Object.assign(i,t),name:"Carousel2"})}initialize(){if(super.initialize(),this.slidesNodes=Array.from(this.node.children),this.totalSlides=this.slidesNodes.length,this.itemsHolderNode=document.createElement("div"),this.controlsNode=document.createElement("div"),this.index=0,this.isIdle=!0,this.touchStart={x:0,y:0},this.touchEnd={x:0,y:0},this.config.pages&&(this.pagesNode=document.createElement("div")),this.config.counter&&(this.counterNode=document.createElement("div")),this.node.classList.add("faze-animation-"+this.config.animation.type,"faze-direction-"+this.config.animation.direction),this.itemsHolderNode.className="faze-carousel-holder",this.initializeSlides(),this.initializeArrows(),this.node.appendChild(this.itemsHolderNode),this.updateCurrentSlideSizes(),"function"==typeof this.config.callbacks.created)try{this.config.callbacks.created({holderNode:this.itemsHolderNode,carouselNode:this.node,slidesNodes:this.slidesNodes,totalSlides:this.totalSlides,index:this.index,controlsNode:this.controlsNode,counterNode:this.counterNode,arrowsNode:this.arrowsNode,arrowsNodes:this.arrowsNodes,pagesNode:this.pagesNode,currentSlideNode:this.slidesNodes[this.index]})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "created": '+e)}}initializeSlides(){this.slidesNodes.forEach((e,t)=>{e.dataset.fazeIndex=t.toString(),e.classList.add("faze-item"),0===t&&(this.currentSlide=e,e.classList.add("faze-active")),this.itemsHolderNode.appendChild(e)})}initializeArrows(){if(this.config.arrows)if(this.arrowsNode=document.createElement("div"),this.config.selectors.arrowLeft&&this.config.selectors.arrowRight){const e=document.querySelector(this.config.selectors.arrowLeft),t=document.querySelector(this.config.selectors.arrowRight);e&&t?this.arrowsNodes={left:e,right:t}:this.config.arrows=!1}else this.arrowsNodes={left:document.createElement("div"),right:document.createElement("div")}}bind(){super.bind(),this.config.pages&&this.bindPagination(),this.config.arrows&&this.bindArrows(),"slide"===this.config.animation.type&&(this.bindMouseGestures(),this.bindTouchGestures())}bindPagination(){this.pagesNodes.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=e.dataset.fazeIndex;i&&this.change(parseInt(i,10))})})}bindArrows(){this.arrowsNodes.left.addEventListener("click",e=>{e.preventDefault(),this.arrowsNodes.left.classList.contains("faze-disabled")||this.prev()}),this.arrowsNodes.right.addEventListener("click",e=>{e.preventDefault(),this.arrowsNodes.right.classList.contains("faze-disabled")||this.next()})}mouseOrTouchDown(e){return!(!Q.Helpers.isMouseOver(e,this.node).contains||Q.Helpers.isMouseOverlapsNode(e,this.controlsNode)||!this.isIdle)&&(e.preventDefault(),this.touchStart=Q.Helpers.getMouseOrTouchPosition(e),this.insertSlideBefore(),this.itemsHolderNode.style.left=-this.slideWidth+"px",this.isIdle=!1,!0)}mouseOrTouchMove(e,t){if(!t)return;this.touchEnd=Q.Helpers.getMouseOrTouchPosition(e);const i=-(this.touchStart.x-this.touchEnd.x);this.itemsHolderNode.style.left=i-this.slideWidth+"px",parseInt(this.itemsHolderNode.style.left,10)>=0?this.itemsHolderNode.style.left="0":parseInt(this.itemsHolderNode.style.left,10)<=-2*this.slideWidth&&(this.itemsHolderNode.style.left=`-${2*this.slideWidth}px`)}mouseOrTouchUp(e,t){if(!t)return;this.touchEnd=Q.Helpers.getMouseOrTouchPosition(e);const i=-(this.touchStart.x-this.touchEnd.x);i<-this.slideWidth/2?Q.Animations.smoothBetween(-(Math.abs(i)+this.slideWidth),-2*this.slideWidth,this.config.animation.time,e=>{this.itemsHolderNode.style.left=e+"px"},()=>{this.insertSlideAfter(),this.insertSlideAfter(),this.index+=1,this.checkIndexBounds(),this.updateAfterChangeSlide(this.slidesNodes[this.index]),this.itemsHolderNode.style.left="0",this.isIdle=!0}):i>this.slideWidth/2?Q.Animations.smoothBetween(-(this.slideWidth-Math.abs(i)),0,this.config.animation.time,e=>{this.itemsHolderNode.style.left=e+"px"},()=>{this.index-=1,this.checkIndexBounds(),this.updateAfterChangeSlide(this.slidesNodes[this.index-1]),this.itemsHolderNode.style.left="0",this.isIdle=!0}):i<0?(this.insertSlideAfter(),Q.Animations.smoothBetween(-Math.abs(i),0,this.config.animation.time,e=>{this.itemsHolderNode.style.left=e+"px"},()=>{this.isIdle=!0})):Q.Animations.smoothBetween(-(-Math.abs(i)+this.slideWidth),-this.slideWidth,this.config.animation.time,e=>{this.itemsHolderNode.style.left=e+"px"},()=>{this.insertSlideAfter(),this.itemsHolderNode.style.left="0",this.isIdle=!0})}bindMouseGestures(){let e=!1;document.body.addEventListener("mousedown",t=>{e=this.mouseOrTouchDown(t)}),document.body.addEventListener("mousemove",t=>{this.mouseOrTouchMove(t,e)}),document.body.addEventListener("mouseup",t=>{this.mouseOrTouchUp(t,e),e=!1})}bindTouchGestures(){let e=!1;document.body.addEventListener("touchstart",t=>{e=this.mouseOrTouchDown(t)}),document.body.addEventListener("touchmove",t=>{this.mouseOrTouchMove(t,e)}),document.body.addEventListener("touchend",t=>{this.mouseOrTouchUp(t,e),e=!1})}build(){super.build(),this.buildControls()}buildControls(){(this.config.arrows||this.config.pages||this.config.counter)&&(this.controlsNode.className="faze-carousel-controls",this.node.appendChild(this.controlsNode),this.config.arrows&&this.buildArrows(),this.config.pages&&this.buildPagination(),this.config.counter&&this.buildCounter())}buildCounter(){this.counterNode.className="faze-carousel-counter",this.changeCounter(),this.config.arrows?this.arrowsNode.insertBefore(this.counterNode,this.arrowsNodes.right):this.controlsNode.appendChild(this.counterNode)}buildPagination(){this.pagesNode||this.logger.error("Родительский элемент пагинации не найден"),this.pagesNode.className="faze-carousel-pages",this.node.appendChild(this.pagesNode);let e="";for(let t=0;t<this.totalSlides;t+=1)e+=`<div class="faze-page" data-faze-index="${t}"></div>`;this.pagesNode.innerHTML=e,this.pagesNodes=Array.from(this.pagesNode.querySelectorAll(".faze-page")),this.controlsNode.appendChild(this.pagesNode),this.pagesNodes[0].classList.add("faze-active")}buildArrows(){this.arrowsNode.className="faze-carousel-arrows",this.controlsNode.appendChild(this.arrowsNode),this.config.selectors.arrowLeft&&this.config.selectors.arrowRight||(this.arrowsNodes.left.className="faze-carousel-arrow faze-carousel-arrow-prev",this.arrowsNode.appendChild(this.arrowsNodes.left),this.arrowsNodes.right.className="faze-carousel-arrow faze-carousel-arrow-next",this.arrowsNode.appendChild(this.arrowsNodes.right))}next(){this.isIdle&&(this.index+=1,this.index>=this.totalSlides&&(this.index=Math.max(this.index-this.totalSlides,0)),this.updateSlides(x.Forward))}prev(){this.isIdle&&(this.index-=1,this.index<0&&(this.index=Math.min(this.totalSlides-Math.abs(this.index),this.totalSlides-1)),this.updateSlides(x.Backward))}change(e){if(!this.isIdle)return;let t,i;if(this.index>e)t=x.Backward;else{if(!(this.index<e))return;t=x.Forward}i=e>this.index?e-this.index:Math.abs(this.index-e),this.index=e,this.updateSlides(t,i)}changeCallbackCall(e){if("function"==typeof this.config.callbacks.changed)try{this.config.callbacks.changed({direction:e,holderNode:this.itemsHolderNode,carouselNode:this.node,slidesNodes:this.slidesNodes,totalSlides:this.totalSlides,index:this.index,currentSlideNode:this.currentSlide,controlsNode:this.controlsNode,counterNode:this.counterNode,arrowsNode:this.arrowsNode,arrowsNodes:this.arrowsNodes,pagesNode:this.pagesNode})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "changed": '+e)}}beforeChangeCallbackCall(e){if("function"==typeof this.config.callbacks.beforeChanged){const t=this.slidesNodes.find(e=>parseInt(e.dataset.fazeIndex||"0",10)===this.index)||this.slidesNodes[0];try{this.config.callbacks.beforeChanged({direction:e,currentSlideNode:t,holderNode:this.itemsHolderNode,carouselNode:this.node,slidesNodes:this.slidesNodes,totalSlides:this.totalSlides,index:this.index,controlsNode:this.controlsNode,counterNode:this.counterNode,arrowsNode:this.arrowsNode,arrowsNodes:this.arrowsNodes,pagesNode:this.pagesNode})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "changed": '+e)}}}checkIndexBounds(){this.index>this.totalSlides-1?this.index=0:this.index<0&&(this.index=this.totalSlides-1)}updateSlides(e,t=1){let i;switch(this.beforeChangeCallbackCall(e),this.isIdle=!1,this.config.animation.type){case"fade":i=this.slidesNodes[this.index],i.style.zIndex="2",i.style.opacity="1",Q.Animations.smoothBetween(0,1,this.config.animation.time,e=>{this.currentSlide.style.opacity=(1-e).toString()},()=>{Q.Helpers.activateItem(this.slidesNodes,this.index,"faze-active"),this.slidesNodes.forEach(e=>{e.removeAttribute("style")}),this.currentSlide=i,this.updateCurrentSlideSizes(),this.isIdle=!0,this.changeControls()}),this.changeCallbackCall(e);break;case"slide":i=this.slidesNodes[t];const s=this.slideWidth*t;if(e===x.Backward){this.itemsHolderNode.style.left=`-${s}px`;for(let e=0;e<t;e++)this.insertSlideBefore()}Q.Animations.smoothBetween(0,s,this.config.animation.time,t=>{e===x.Forward?this.itemsHolderNode.style.left=`-${t}px`:this.itemsHolderNode.style.left=`-${s-t}px`},()=>{if(e===x.Forward)for(let e=0;e<t;e++)this.insertSlideAfter();this.itemsHolderNode.style.left="0",this.slidesNodes.forEach(e=>{e.classList.remove("faze-active")}),this.updateAfterChangeSlide(i)}),this.changeCallbackCall(e)}}updateAfterChangeSlide(e){e.classList.add("faze-active"),this.currentSlide=e,this.updateCurrentSlideSizes(),this.slidesNodes=Array.from(this.itemsHolderNode.children),this.isIdle=!0,this.changeControls()}changeControls(){this.config.pages&&this.changePagination(),this.config.counter&&this.changeCounter()}changeCounter(){this.counterNode.innerHTML=`<span class="faze-carousel-counter-current">${this.index+1}</span> / <span class="faze-carousel-counter-total">${this.totalSlides}</span>`}changePagination(){Q.Helpers.activateItem(Array.from(this.pagesNodes),this.index,"faze-active")}insertSlideBefore(){this.slidesNodes=Array.from(this.itemsHolderNode.children),this.itemsHolderNode.insertBefore(this.slidesNodes[this.slidesNodes.length-1],this.slidesNodes[0])}insertSlideAfter(){this.slidesNodes=Array.from(this.itemsHolderNode.children),this.itemsHolderNode.appendChild(this.slidesNodes[0])}updateCurrentSlideSizes(){this.slideWidth=this.currentSlide.getBoundingClientRect().width}static initializeByDataAttributes(e){new S(e,{autoplay:"true"===(e.dataset.fazeCarouselAutoplay||"false"),counter:"true"===(e.dataset.fazeCarouselCounter||"false"),pages:"true"===(e.dataset.fazeCarouselPages||"false"),arrows:"true"===(e.dataset.fazeCarouselArrows||"true"),duration:parseInt(e.dataset.fazeCarouselDuration||"3000",10),infinite:"true"===(e.dataset.fazeCarouselInfinite||"true"),useSlideFullSize:"true"===(e.dataset.fazeCarouselUseSlideFullSize||"false"),stopOnHover:"true"===(e.dataset.fazeCarouselStopOnHover||"false"),amountPerSlide:parseInt(e.dataset.fazeCarouselAmountPerSlide||"1",10),disallowRanges:JSON.parse(e.dataset.fazeCarouselDisallowRanges||"[]"),animation:{type:e.dataset.fazeCarouselAnimationType||"fade",time:parseInt(e.dataset.fazeCarouselAnimationTime||"500",10),direction:e.dataset.fazeCarouselAnimationDirection||"horizontal"}})}}const E=S;class C{constructor(e,i){if(!e)throw new Error("Не задан объект зума");if(this.logger=new t("Модуль Faze.Zoom:"),e.classList.contains("faze-zoom-initialized"))return;const s={image:void 0,side:"right",width:300,height:300,callbacks:{created:void 0}};this.config=Object.assign(s,i),this.node=e,this.wrapperNode=document.createElement("div"),this.pointerNode=document.createElement("div"),this.bigImageWrapperNode=document.createElement("div"),this.bigImageNode=document.createElement("img"),this.isEnabled=!0,this.bigImageSize={width:0,height:0},this.initialize(),this.bind(),this.calculate()}initialize(){if(this.node.classList.add("faze-zoom-initialized"),this.wrapperNode.className="faze-zoom",!this.node.parentNode)throw new Error("У DOM элемента зума нет родителя");switch(this.node.parentNode.insertBefore(this.wrapperNode,this.node),this.node.classList.add("faze-zoom-initial-image"),this.wrapperNode.appendChild(this.node),this.pointerNode.className="faze-zoom-pointer",this.wrapperNode.appendChild(this.pointerNode),this.bigImageWrapperNode.className="faze-zoom-image-wrapper",this.bigImageWrapperNode.style.width=this.config.width+"px",this.bigImageWrapperNode.style.height=this.config.height+"px",this.config.side){case"bottom":this.bigImageWrapperNode.style.left="0",this.bigImageWrapperNode.style.bottom=`-${this.config.height}px`;break;case"top":this.bigImageWrapperNode.style.left="0",this.bigImageWrapperNode.style.top=this.config.height+"px";break;case"left":this.bigImageWrapperNode.style.top="0",this.bigImageWrapperNode.style.right=this.config.width+"px";break;case"right":default:this.bigImageWrapperNode.style.top="0",this.bigImageWrapperNode.style.right=`-${this.config.width}px`}this.bigImageNode.className="faze-zoom-big-image";const e=this.config.image||this.node.dataset.fazeFullImage;if(e){const t=new Image;t.src=e,t.onload=()=>{this.bigImageNode.src=e,this.bigImageWrapperNode.appendChild(this.bigImageNode),this.wrapperNode.appendChild(this.bigImageWrapperNode),this.bigImageSize.width=t.width,this.bigImageSize.height=t.height,this.calculate()}}if("function"==typeof this.config.callbacks.created)try{this.config.callbacks.created()}catch(e){console.error('Ошибка исполнения пользовательской функции "created"',e)}}bind(){this.wrapperNode.addEventListener("mouseover",()=>{this.bigImageWrapperNode.style.display="block",this.pointerNode.style.display="block",this.calculate()}),this.wrapperNode.addEventListener("mouseout",()=>{this.bigImageWrapperNode.style.display="none",this.pointerNode.style.display="none"}),this.wrapperNode.addEventListener("mousemove",e=>{this.move(e)})}move(e){if(this.isEnabled){this.position.x=e.clientX-this.node.getBoundingClientRect().left,this.position.y=e.clientY-this.node.getBoundingClientRect().top,this.position.realX=Math.max(Math.min(this.position.x-this.position.xMin,this.position.xMax-this.position.xMin),0)/this.ratioX,this.position.realY=Math.max(Math.min(this.position.y-this.position.yMin,this.position.yMax-this.position.yMin),0)/this.ratioY,this.bigImageNode.style.left=`-${Math.min(this.position.realX,this.position.xMaxOffset)}px`,this.bigImageNode.style.top=`-${Math.min(this.position.realY,this.position.yMaxOffset)}px`;const t=this.position.x-this.pointerSize.width/2,i=this.position.y-this.pointerSize.height/2;this.pointerNode.style.left=Math.max(Math.min(t,this.node.getBoundingClientRect().width-this.pointerSize.width),0)+"px",this.pointerNode.style.top=Math.max(Math.min(i,this.node.getBoundingClientRect().height-this.pointerSize.height),0)+"px";const s=e.path||e.composedPath&&e.composedPath();s&&s.find(e=>e===this.bigImageWrapperNode)&&(this.bigImageWrapperNode.style.display="none",this.pointerNode.style.display="none")}else this.bigImageWrapperNode.style.display="none",this.pointerNode.style.display="none"}calculate(){const e=this.bigImageSize.width,t=this.bigImageSize.height;(e<=this.config.width&&0!==e||t<=this.config.height&&0!==t)&&(this.isEnabled=!1);const i=this.node.getBoundingClientRect().width,s=this.node.getBoundingClientRect().height;this.ratioX=i/e,this.ratioY=s/t,this.ratio=Math.min(this.ratioX,this.ratioY),this.pointerSize={width:this.config.width*this.ratio,height:this.config.height*this.ratio},this.pointerNode.style.width=this.pointerSize.width+"px",this.pointerNode.style.height=this.pointerSize.height+"px",this.position={x:0,realX:0,xMin:Math.round(this.pointerSize.width/2),xMax:Math.round(i-this.pointerSize.width/2),xMaxOffset:Math.round(e-this.config.width),y:0,realY:0,yMin:Math.round(this.pointerSize.height/2),yMax:Math.round(s-this.pointerSize.height/2),yMaxOffset:Math.round(t-this.config.height)}}setImage(e){if(e){const t=new Image;t.src=e,t.onload=()=>{this.isEnabled=!0,this.bigImageNode.src=e,this.bigImageWrapperNode.appendChild(this.bigImageNode),this.wrapperNode.appendChild(this.bigImageWrapperNode),this.bigImageSize.width=t.width,this.bigImageSize.height=t.height,this.calculate()}}}static initializeByDataAttributes(e){new Q.Zoom(e,{image:e.dataset.fazeZoomImage,side:e.dataset.fazeZoomSide||"right",width:parseInt(e.dataset.fazeZoomWidth||"300",10),height:parseInt(e.dataset.fazeZoomHeight||"300",10)})}static hotInitialize(){Q.Observer.watch('[data-faze~="zoom"]',e=>{C.initializeByDataAttributes(e)}),document.querySelectorAll('[data-faze~="zoom"]').forEach(e=>{C.initializeByDataAttributes(e)})}}const L=C;var k=function(e,t,i,s){return new(i||(i=Promise))((function(o,a){function n(e){try{d(s.next(e))}catch(e){a(e)}}function r(e){try{d(s.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,r)}d((s=s.apply(e,t||[])).next())}))};const I=class{constructor(e,t,i){if(!t)throw new Error("Не заданы объекты галереи");const s={group:"default",align:"center",showClose:!0,showArrows:!0,showCaption:!1,size:void 0,callbacks:{beforeOpened:void 0,afterOpened:void 0,beforeChanged:void 0,afterChanged:void 0}};this.config=Object.assign(s,i),this.callerNode=e,this.callerNodes=t,this.wrapperData={controlsNodes:{}},this.ANIMATION_TIME=400,this.OFFSET={width:12,height:12},this.currentIndex=Array.from(this.callerNodes).indexOf(this.callerNode),this.viewport={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},this.initialize()}initialize(){return k(this,void 0,void 0,(function*(){const{imageNode:e,size:t}=yield this.getFullImageSize(this.callerNode.dataset.fazeZoomboxImage||"");if(this.wrapperData.imageNode=e,"function"==typeof this.config.callbacks.beforeOpened)try{this.config.callbacks.beforeOpened()}catch(e){console.error('Ошибка исполнения пользовательского метода "beforeOpened":',e)}this.open(t),this.bind()}))}bind(){this.config.showClose&&this.bindCloseButton(),this.config.showArrows&&this.callerNodes.length>1&&this.bindArrowsButtons(),Q.Helpers.bindDrag({node:this.wrapperData.node,callbacks:{beforeDrag:()=>{this.wrapperData.node&&(this.wrapperData.node.style.transition="none")},afterDrag:e=>{this.wrapperData.node&&(this.currentPositionAndSize.position={x:parseInt(this.wrapperData.node.style.left,10),y:parseInt(this.wrapperData.node.style.top,10)},Q.Helpers.comparePositions(e.startPosition,this.currentPositionAndSize.position)&&e.event.target===this.wrapperData.imageNode&&this.close(),this.wrapperData.node.style.transition="width 0.5s, height 0.5s, left 0.5s, top 0.5s")}}})}bindCloseButton(){var e;null===(e=this.wrapperData.controlsNodes.close)||void 0===e||e.addEventListener("click",e=>{e.preventDefault(),this.close()})}bindArrowsButtons(){var e,t,i,s;null===(t=null===(e=this.wrapperData.controlsNodes.arrows)||void 0===e?void 0:e.next)||void 0===t||t.addEventListener("click",()=>{if("function"==typeof this.config.callbacks.beforeChanged)try{this.config.callbacks.beforeChanged()}catch(e){console.error('Ошибка исполнения пользовательского метода "beforeChanged":',e)}this.currentIndex+=1,this.currentIndex>this.callerNodes.length-1&&(this.currentIndex=0),this.change(this.currentIndex).then(()=>{if("function"==typeof this.config.callbacks.afterChanged)try{this.config.callbacks.afterChanged()}catch(e){console.error('Ошибка исполнения пользовательского метода "afterChanged":',e)}})}),null===(s=null===(i=this.wrapperData.controlsNodes.arrows)||void 0===i?void 0:i.prev)||void 0===s||s.addEventListener("click",()=>{if("function"==typeof this.config.callbacks.beforeChanged)try{this.config.callbacks.beforeChanged()}catch(e){console.error('Ошибка исполнения пользовательского метода "beforeChanged":',e)}this.currentIndex-=1,this.currentIndex<0&&(this.currentIndex=this.callerNodes.length-1),this.change(this.currentIndex).then(()=>{if("function"==typeof this.config.callbacks.afterChanged)try{this.config.callbacks.afterChanged()}catch(e){console.error('Ошибка исполнения пользовательского метода "afterChanged":',e)}})})}change(e){return k(this,void 0,void 0,(function*(){this.changeActiveThumbnail(e);const{imageNode:t,size:i}=yield this.getFullImageSize(this.callerNode.dataset.fazeZoomboxImage||"");this.wrapperData.imageNode&&(this.wrapperData.imageNode.src=t.src),this.wrapperData.node&&Q.Animations.animatePositionAndSize({node:this.wrapperData.node,from:this.currentPositionAndSize,to:this.getFullImagePositionAndSize(i),time:this.ANIMATION_TIME+200}).then(e=>{this.currentPositionAndSize=e})}))}changeActiveThumbnail(e){this.callerNode.style.visibility="visible",this.callerNode=this.callerNodes[e],this.callerNode.style.visibility="hidden",this.currentThumbnailPositionAndSize=Q.Helpers.getElementPositionAndSize(this.callerNode)}open(e){this.build(e)}build(e){const t=document.createElement("div");t.className="faze-zoombox-wrapper",this.wrapperData.node=t,this.config.showClose&&this.buildCloseButton(),this.config.showArrows&&this.callerNodes.length>1&&this.buildArrows(),this.callerNode.style.visibility="hidden",this.wrapperData.imageNode&&t.appendChild(this.wrapperData.imageNode),this.buildCaption(),this.currentThumbnailPositionAndSize=Q.Helpers.getElementPositionAndSize(this.callerNode,{width:12,height:12},{x:6,y:6}),document.body.appendChild(t);const i=this.getFullImagePositionAndSize(e);Q.Animations.animatePositionAndSize({node:this.wrapperData.node,from:this.currentThumbnailPositionAndSize,to:i,time:this.ANIMATION_TIME+200}).then(e=>{this.currentPositionAndSize=e})}buildCaption(){var e;this.wrapperData.captionNode=document.createElement("div"),this.wrapperData.captionNode.className="faze-zoombox-caption",this.wrapperData.captionNode.innerHTML=this.callerNode.dataset.fazeZoomboxCaption||"",null===(e=this.wrapperData.node)||void 0===e||e.appendChild(this.wrapperData.captionNode)}getFullImagePositionAndSize(e){if(!this.wrapperData.node)return{position:{x:0,y:0},size:{width:0,height:0}};const t={width:0,height:0},i={x:0,y:0},s={width:parseInt(window.getComputedStyle(document.body).paddingLeft,10),height:parseInt(window.getComputedStyle(document.body).paddingRight,10)},o=this.getCaptionHeight();this.wrapperData.node.style.paddingBottom=parseInt(window.getComputedStyle(this.wrapperData.node).paddingBottom,10)+o+"px",this.config.size?(t.width=this.config.size.width,t.height=this.config.size.height):e.width/e.height>this.viewport.width/this.viewport.height?(t.width=Math.min(this.viewport.width,e.width),t.height=t.width*e.height/e.width):(t.height=Math.min(this.viewport.height,e.height),t.width=t.height*e.width/e.height);const a={x:{center:s.width+this.viewport.width/2-t.width/2,self:this.currentThumbnailPositionAndSize.position.x-(t.width-this.currentThumbnailPositionAndSize.size.width)/2,left:s.width,right:this.viewport.width-t.width},y:{center:window.pageYOffset+this.viewport.height/2-t.height/2,self:this.currentThumbnailPositionAndSize.position.y-(t.height-this.currentThumbnailPositionAndSize.size.height)/2,top:window.pageYOffset,bottom:window.pageYOffset+this.viewport.height-t.height}};switch(this.config.align){case"center":i.x=a.x.center,i.y=a.y.center;break;case"left top":i.x=a.x.left,i.y=a.y.top;break;case"center top":i.x=a.x.center,i.y=a.y.top;break;case"right top":i.x=a.x.right,i.y=a.y.top;break;case"right center":i.x=a.x.right,i.y=a.y.center;break;case"right bottom":i.x=a.x.right,i.y=a.y.bottom;break;case"center bottom":i.x=a.x.center,i.y=a.y.bottom;break;case"left bottom":i.x=a.x.left,i.y=a.y.bottom;break;case"left center":i.x=a.x.left,i.y=a.y.center;break;case"self":default:i.x=a.x.self,i.y=a.y.self}return i.x<=0?i.x=a.x.left:i.x>a.x.right&&(i.x=a.x.right),i.y<=0?i.y=a.y.top:i.y>a.y.bottom&&(i.y=a.y.bottom),{size:t,position:i}}getCaptionHeight(){let e=0;if(this.wrapperData.captionNode){const t=window.getComputedStyle(this.wrapperData.captionNode);e=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10)+this.wrapperData.captionNode.offsetHeight}return e}buildArrows(){var e,t;this.wrapperData.controlsNodes.arrows={},this.wrapperData.controlsNodes.arrows.next=document.createElement("div"),this.wrapperData.controlsNodes.arrows.next.className="faze-zoombox-arrow faze-zoombox-arrow-next",null===(e=this.wrapperData.node)||void 0===e||e.appendChild(this.wrapperData.controlsNodes.arrows.next),this.wrapperData.controlsNodes.arrows.prev=document.createElement("div"),this.wrapperData.controlsNodes.arrows.prev.className="faze-zoombox-arrow faze-zoombox-arrow-prev",null===(t=this.wrapperData.node)||void 0===t||t.appendChild(this.wrapperData.controlsNodes.arrows.prev)}buildCloseButton(){var e;this.wrapperData.controlsNodes.close=document.createElement("div"),this.wrapperData.controlsNodes.close.className="faze-zoombox-close",null===(e=this.wrapperData.node)||void 0===e||e.appendChild(this.wrapperData.controlsNodes.close)}close(){this.wrapperData.node&&Q.Animations.animatePositionAndSize({node:this.wrapperData.node,from:this.currentPositionAndSize,to:this.currentThumbnailPositionAndSize,time:this.ANIMATION_TIME+200}).then(e=>{this.currentPositionAndSize=e,this.clearWrapperData(),this.callerNode.style.visibility="visible"})}clearWrapperData(){var e;null===(e=this.wrapperData.node)||void 0===e||e.remove(),this.wrapperData={controlsNodes:{}}}getFullImageSize(e){return new Promise((t,i)=>{const s=new Image;s.src=e,s.className="faze-zoombox-image",s.onload=()=>t({imageNode:s,size:{width:s.width,height:s.height}}),s.onerror=i})}static hotInitialize(){document.querySelectorAll('[data-faze~="zoombox"]').forEach(e=>{e.classList.add("faze-zoombox-caller")}),Q.on("click",'[data-faze~="zoombox"]',(e,t)=>{const i=t.dataset.fazeZoomboxGroup,s=t.dataset.fazeZoomboxAlign||"self";let o;t.dataset.fazeZoomboxWidth&&t.dataset.fazeZoomboxHeight&&(o={width:parseInt(t.dataset.fazeZoomboxWidth||"0",10),height:parseInt(t.dataset.fazeZoomboxHeight||"0",10)});const a=i?document.querySelectorAll(`[data-faze-zoombox-group="${i}"]`):[];new Q.ZoomBox(t,a,{group:i,align:s,size:o})})}};var A;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(A||(A={}));const P=class{constructor(e,t){if(!e)throw new Error("Не задан объект скрола");this.config=Object.assign({width:"100%",height:"0",shrink:!0,transition:"top 0.5s ease",class:""},t),this.node=e,this.wrapperNode=document.createElement("div"),this.scrollBarVerticalNode=document.createElement("div"),this.scrollBarHorizontalNode=document.createElement("div"),this.isVertical=!1,this.initialize(),this.bind()}initialize(){this.node.style.position="absolute",this.node.style.top="0",this.node.style.left="0",this.node.style.transition=this.config.transition,this.wrapperNode.className="faze-scroll "+this.config.class,this.node.parentNode&&this.node.parentNode.insertBefore(this.wrapperNode,this.node),this.wrapperNode.appendChild(this.node),this.calculateHeight(),this.calculateWidth(),this.scrollBarVerticalNode.className="faze-scroll-vertical",this.scrollBarVerticalNode.style.transition=this.config.transition,this.wrapperNode.appendChild(this.scrollBarVerticalNode),this.scrollBarHorizontalNode.className="faze-scroll-horizontal",this.scrollBarHorizontalNode.style.transition=this.config.transition,this.wrapperNode.appendChild(this.scrollBarHorizontalNode)}bind(){this.bindResizeRecalculate(),this.bindMouseWheel(),this.bindTouchDrag(),this.bindMouseDrag()}bindResizeRecalculate(){(this.config.width.toString().includes("%")||this.config.height.toString().includes("%"))&&window.addEventListener("resize",()=>{this.calculateHeight(),this.calculateWidth()})}bindMouseWheel(){this.wrapperNode.addEventListener("wheel",e=>{if(this.isVertical){e.preventDefault();const t=e.deltaY>0?100:-100;let i=parseInt(this.node.style.top||"0",10)-t;i>=0?i=0:i<=-this.heightScrollNode+parseInt(this.config.height,10)&&(i=-this.heightScrollNode+parseInt(this.config.height,10)),this.node.style.top=i+"px",this.scrollBarVerticalNode.style.top=Math.abs(this.scrollVerticalHeightInPercents/100*i)+"px"}})}bindTouchDrag(){this.bindTouchDragDirection(A.Vertical),this.bindTouchDragDirection(A.Horizontal)}bindTouchDragDirection(e){let t=0,i=0;const s=e===A.Horizontal?this.scrollBarHorizontalNode:this.scrollBarVerticalNode,o=o=>{o.preventDefault(),i=t-(e===A.Horizontal?o.touches[0].clientX:o.touches[0].clientY),t=e===A.Horizontal?o.touches[0].clientX:o.touches[0].clientY;let a=0;e===A.Horizontal?(a=this.node.offsetLeft-i,a<=-(this.node.offsetWidth-this.wrapperWidth)?a=-(this.node.offsetWidth-this.wrapperWidth):a>=0&&(a=0)):(a=this.node.offsetTop-i,a<=-(this.node.offsetHeight-this.wrapperHeight)?a=-(this.node.offsetHeight-this.wrapperHeight):a>=0&&(a=0)),e===A.Horizontal?(this.node.style.left=a+"px",s.style.left=-parseInt(this.node.style.left||"",10)*this.scrollHorizontalWidthInPercents/100+"px"):(this.node.style.top=a+"px",s.style.top=-parseInt(this.node.style.top||"",10)*this.scrollVerticalHeightInPercents/100+"px")},a=()=>{s.style.transition=this.config.transition,this.node.style.transition=this.config.transition,this.wrapperNode.removeEventListener("touchend",a),this.wrapperNode.removeEventListener("touchend",o)};this.wrapperNode.addEventListener("touchstart",i=>{t=e===A.Horizontal?i.touches[0].clientX:i.touches[0].clientY,s.style.transition="",this.node.style.transition="",this.wrapperNode.addEventListener("touchend",a),this.wrapperNode.addEventListener("touchmove",o)})}bindMouseDrag(){this.bindMouseDragDirection(A.Vertical),this.bindMouseDragDirection(A.Horizontal)}bindMouseDragDirection(e){let t=0,i=0;const s=e===A.Horizontal?this.scrollBarHorizontalNode:this.scrollBarVerticalNode,o=o=>{if(o.preventDefault(),e===A.Horizontal){if(s.getBoundingClientRect().right<o.clientX||s.getBoundingClientRect().left>o.clientX)return}else if(s.getBoundingClientRect().bottom<o.clientY||s.getBoundingClientRect().top>o.clientY)return;i=t-(e===A.Horizontal?o.clientX:o.clientY),t=e===A.Horizontal?o.clientX:o.clientY;let a=0;a=e===A.Horizontal?this.wrapperWidth-s.offsetWidth:this.wrapperHeight-s.offsetHeight;let n=(e===A.Horizontal?s.offsetLeft:s.offsetTop)-i;n<=0?n=0:n>=a&&(n=a),e===A.Horizontal?(s.style.left=n+"px",this.node.style.left=-parseInt(s.style.left,10)/this.scrollHorizontalWidthInPercents*100+"px"):(s.style.top=n+"px",this.node.style.top=-parseInt(s.style.top,10)/this.scrollVerticalHeightInPercents*100+"px")},a=()=>{s.style.transition=this.config.transition,this.node.style.transition=this.config.transition,this.wrapperNode.removeEventListener("mouseup",a),this.wrapperNode.removeEventListener("mousemove",o)};s.addEventListener("mousedown",i=>{i.preventDefault(),t=e===A.Horizontal?i.clientX:i.clientY,s.style.transition="",this.node.style.transition="",this.wrapperNode.addEventListener("mouseup",a),this.wrapperNode.addEventListener("mousemove",o)})}calculateWidth(){if(this.config.width){const e=window.getComputedStyle(this.wrapperNode),t=parseFloat(e.paddingLeft||"0")+parseFloat(e.paddingRight||"0");let i="";i=this.config.width&&0!==parseFloat(this.config.width)?this.config.width.toString().includes("%")?parseFloat(this.config.width)+"%":parseFloat(this.config.width)+t+"px":this.node.offsetHeight+t+"px",this.wrapperNode.style.width=i,this.widthScrollNode=this.node.getBoundingClientRect().width,this.wrapperWidth=this.wrapperNode.getBoundingClientRect().width-t,this.scrollBarHorizontalNode&&(this.widthScrollNode>this.wrapperWidth?(this.isHorizontal=!0,this.wrapperNode.classList.add("faze-scroll-horizontal"),this.scrollHorizontalWidthInPercents=100*(this.wrapperWidth/this.widthScrollNode).toFixed(3),this.scrollBarHorizontalNode.style.width=this.scrollHorizontalWidthInPercents+"%"):(this.isHorizontal=!1,this.wrapperNode.classList.remove("faze-scroll-horizontal")))}}calculateHeight(){if(this.config.height)if(!this.config.height.toString().includes("%")&&this.node.getBoundingClientRect().height<=parseInt(this.config.height,10))this.isVertical=!1,this.wrapperNode.classList.remove("faze-scroll-vertical"),this.wrapperNode.style.height=(this.node.getBoundingClientRect().height||0)+"px";else if(this.scrollBarVerticalNode){const e=window.getComputedStyle(this.wrapperNode),t=parseFloat(e.paddingTop||"0")+parseFloat(e.paddingBottom||"0");let i="";i=this.config.height&&0!==parseFloat(this.config.height)?this.config.height.toString().includes("%")?parseFloat(this.config.height)+"%":parseFloat(this.config.height)+t+"px":this.node.offsetHeight+t+"px",this.wrapperNode.style.height=i,this.heightScrollNode=this.node.getBoundingClientRect().height,this.wrapperHeight=this.wrapperNode.getBoundingClientRect().height-t,this.heightScrollNode>this.wrapperHeight?(this.isVertical=!0,this.wrapperNode.classList.add("faze-scroll-vertical"),this.scrollVerticalHeightInPercents=100*(parseInt(this.config.height,10)/this.heightScrollNode).toFixed(3),this.scrollBarVerticalNode.style.height=this.scrollVerticalHeightInPercents+"%"):(this.isVertical=!1,this.wrapperNode.classList.remove("faze-scroll-vertical"))}}};const D=class{constructor(e,t){if(!e)throw new Error("Не задан объект скрола");const i={url:void 0,texts:{buttonLoading:"Обработка...",buttonCompleted:"Готово!"},callbacks:{created:void 0,success:void 0,error:void 0},selectors:{button:'[type="submit"]'}};this.config=Object.assign(i,t),this.node=e,this.button=this.node.querySelector(this.config.selectors.button),this.initialize(),this.bind()}initialize(){this.node.classList.add("faze-form");try{"function"==typeof this.config.callbacks.created&&this.config.callbacks.created({formNode:this.node,buttonNode:this.button,response:void 0})}catch(e){console.error('Ошибка исполнения пользовательской функции "created":',e)}}bind(){this.node.addEventListener("submit",e=>{const t=new FormData(this.node);this.lockButton();const i=this.config.url||this.node.getAttribute("action")||window.location.href;fetch(i,{method:"POST",body:t,credentials:"same-origin"}).then(e=>e.json()).then(e=>{if("function"==typeof this.config.callbacks.success)try{this.config.callbacks.success({response:e,formNode:this.node,buttonNode:this.button})}catch(e){console.error('Ошибка исполнения пользовательской функции "success":',e)}this.unlockButton()}).catch(e=>{if("function"==typeof this.config.callbacks.error)try{this.config.callbacks.error({formNode:this.node,buttonNode:this.button,response:e})}catch(e){console.error('Ошибка исполнения пользовательской функции "error":',e)}this.unlockButton()}),e.preventDefault()})}lockButton(){this.button&&(this.button.setAttribute("disabled","disabled"),this.button.setAttribute("data-faze-initial-text",this.button.textContent||""),this.button.classList.add("faze-disabled"),this.button.textContent=this.button.getAttribute("data-faze-loading-text")||this.config.texts.buttonLoading)}unlockButton(){this.button&&(this.button.removeAttribute("disabled"),this.button.classList.remove("faze-disabled"),this.button.textContent=this.button.getAttribute("data-faze-initial-text")||this.config.texts.buttonCompleted)}};class H{constructor(e,t){if(!e)throw new Error("Не задан объект бесконечной загрузки");const i={offset:10,quantity:10,tableName:void 0,modifyPath:!1,modules:{get:void 0},selectors:{items:".item"},callbacks:{created:void 0,loaded:void 0},texts:{buttonIdle:"Показать ещё",buttonLoading:"Загрузка..."}};this.config=Object.assign(i,t),this.node=e,this.buttonLoadModeNode=document.createElement("button"),this.offsetString="first"+this.config.tableName,this.initialize(),this.bind()}initialize(){this.node.classList.add("faze-page"),this.updateTotal(),this.resetOffset(),this.createButton(),this.params=new URLSearchParams(window.location.search);const e=parseInt(this.params.get(this.offsetString)||"0",10);if(e>0&&(this.offset=e+this.config.quantity),this.checkButton(),"function"==typeof this.config.callbacks.created)try{this.config.callbacks.created({node:this.node,button:this.buttonLoadModeNode,items:this.node.querySelectorAll(this.config.selectors.items),loadedItems:void 0})}catch(e){console.error('Ошибка исполнения пользовательской функции "created": ',e)}}bind(){this.buttonLoadModeNode.addEventListener("click",()=>{this.params=new URLSearchParams(window.location.search),this.params.set(this.offsetString,this.offset.toString());const e="?"+this.params.toString();this.config.modules.get?this.params.append("show",this.config.modules.get.toString()):console.error('Не задан ID модуля для "show"!'),this.params.append("mime","txt"),this.lockButton();const t=this.node.dataset.fazePagePath||window.location.pathname,i=`${t}${t.includes("?")?"&":"?"}${this.params.toString()}`;fetch(i,{credentials:"same-origin"}).then(e=>e.text()).then(t=>{const i=(new DOMParser).parseFromString(t,"text/html").querySelectorAll(this.config.selectors.items);if(i.forEach(e=>{this.node.append(e)}),this.offset+=this.config.quantity,this.unlockButton(),this.checkButton(),this.config.modifyPath&&window.history.pushState({},"",e),"function"==typeof this.config.callbacks.loaded)try{this.config.callbacks.loaded({node:this.node,button:this.buttonLoadModeNode,items:this.node.querySelectorAll(this.config.selectors.items),loadedItems:i})}catch(e){console.error('Ошибка исполнения пользовательского метода "loaded"',e)}}).catch(e=>{console.error("Ошибка получения новых элементов для бесконечной подгрузки",e)})})}createButton(){this.buttonLoadModeNode.textContent=this.config.texts.buttonIdle,this.buttonLoadModeNode.type="button",this.buttonLoadModeNode.className="btn btn-load_more",this.node.after(this.buttonLoadModeNode)}lockButton(){this.buttonLoadModeNode.setAttribute("disabled","disabled"),this.buttonLoadModeNode.classList.add("faze-disabled"),this.buttonLoadModeNode.textContent=this.config.texts.buttonLoading}unlockButton(){this.buttonLoadModeNode.removeAttribute("disabled"),this.buttonLoadModeNode.classList.remove("faze-disabled"),this.buttonLoadModeNode.textContent=this.config.texts.buttonIdle}updateTotal(e){this.total=null==e?parseInt(this.node.getAttribute("data-faze-page-total")||"9999",10)||9999:e}resetOffset(){this.offset=this.config.offset}checkButton(){this.offset>=this.total?this.buttonLoadModeNode.classList.add("faze-hide"):this.buttonLoadModeNode.classList.remove("faze-hide")}setParams(e){this.params=e}static hotInitialize(){document.querySelectorAll('[data-faze~="page"]').forEach(e=>{new H(e,{offset:parseInt(e.dataset.fazePageOffset||"10",10),quantity:parseInt(e.dataset.fazePageQuantity||"10",10),tableName:e.getAttribute("data-faze-page-table_name"),modifyPath:e.getAttribute("data-faze-page-modify_path"),modules:{get:e.dataset.fazePageModulesGet},selectors:{items:e.dataset.fazePageSelectorsItems||".item"}})})}}const T=H;var B=function(e,t,i,s){return new(i||(i=Promise))((function(o,a){function n(e){try{d(s.next(e))}catch(e){a(e)}}function r(e){try{d(s.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,r)}d((s=s.apply(e,t||[])).next())}))};class M{constructor(e,i){if(!e)throw new Error("Не задан объект фильтра");if(this.logger=new t("Модуль Faze.Filter:"),e.classList.contains("faze-filter-initialized"))return void this.logger.warning("Плагин уже был инициализирован на этот DOM элемент:",e);const s={tableName:void 0,showTotal:!0,changeButton:!0,usePathnameFromQuery:!0,updateQuery:!0,useAPI:!1,submitAfterChange:!1,needToRequest:!0,modules:{get:void 0},cookie:{delimiter:"|",params:[],encode:!0},selectors:{form:".faze-filter-form",itemsHolder:".faze-filter-items",total:".faze-filter-total"},texts:{buttonLoading:"Обработка..."},callbacks:{created:void 0,filtered:void 0}};if(this.config=Object.assign(s,i),this.node=e,!this.config.tableName)throw new Error("Не задан префикс таблицы для фильтрации");this.buttonSubmitNode=this.node.querySelector(this.config.selectors.form+' [type="submit"]'),this.formNode=document.querySelector(this.config.selectors.form),this.itemsHolderNode=document.querySelector(this.config.selectors.itemsHolder),this.disablePresetQuery=void 0!==this.node.dataset.fazeFilterQueryDisable,this.presetQuery=this.node.dataset.fazeFilterQuery,this.cleanPath=this.node.dataset.fazeFilterCleanPath,this.config.showTotal&&this.formNode&&(this.totalNode=this.node.querySelector(this.config.selectors.total)),this.initialize(),this.bind()}initialize(){if(this.node.classList.add("faze-filter-initialized"),this.initializeConfig(),this.updateSearchParams(),this.config.showTotal&&this.totalNode&&(this.totalNode.textContent=this.node.dataset.fazeFilterTotal||""),this.restoreStoredParams(),this.restoreFilteredInputs(),"function"==typeof this.config.callbacks.created)try{this.config.callbacks.created({filterNode:this.node,formNode:this.formNode,itemsHolderNode:this.itemsHolderNode,params:this.params,total:parseInt(this.node.dataset.fazeFilterTotal||"0",10)})}catch(e){console.error('Ошибка исполнения пользовательской функции "created"',e)}}initializeConfig(){this.node.dataset.fazeFilterStored&&(this.config.cookie.params=this.node.dataset.fazeFilterStored.split(",")||this.config.cookie.params),this.node.dataset.fazeFilterStoredEncode&&(this.config.cookie.encode="true"===this.node.dataset.fazeFilterStoredEncode.toLowerCase()||this.config.cookie.encode),this.config.cookie.delimiter=this.node.dataset.fazeFilterStoredDelimiter||this.config.cookie.delimiter}bind(){this.formNode&&this.formNode.addEventListener("submit",e=>{e.preventDefault(),this.lockButton();const t=[...new FormData(this.formNode).entries()].map(e=>`${encodeURIComponent(e[0])}=${encodeURIComponent(e[1])}`).join("&"),i=new URLSearchParams(t);let s="";this.presetQuery&&!this.disablePresetQuery&&"true"===(this.node.dataset.fazeFilterUsePathname||"true")&&(s=this.presetQuery.split("?")[0]);const o=`${s}?${i.toString()}`;i.append("mime","txt");const a=this.config.modules.get||this.node.dataset.fazeFilterModuleGet;a&&i.append("show",a.toString()),this.config.useAPI&&this.cleanPath&&(s=this.cleanPath);const n=`${s}?${i.toString()}`;this.config.needToRequest?fetch(n,{credentials:"same-origin"}).then(e=>e.text()).then(e=>{const t=(new DOMParser).parseFromString(e,"text/html"),i=t.querySelector("."+Array.from(this.node.classList).filter(e=>"faze-filter-initialized"!==e).join("."));if(i){if(this.itemsHolderNode){const e=i.querySelector(this.config.selectors.itemsHolder);this.itemsHolderNode.innerHTML=e?e.innerHTML:'<p class="error">К сожалению, ничего не найдено...</p>'}const e=i.dataset.fazeFilterTotal||"0";this.config.showTotal&&this.totalNode&&(this.totalNode.textContent=e),this.node.dataset.fazeFilterTotal=e}this.config.useAPI?this.getURL(o,this.cleanPath).then(i=>{this.config.updateQuery&&window.history.pushState({},"",i.url),this.afterFilterActions(e,t,i.query)}):(this.config.updateQuery&&window.history.pushState({},"",o),this.afterFilterActions(e,t))}):this.afterFilterActions(void 0,void 0,n)}),this.config.submitAfterChange&&this._bindSubmitAfterChange()}_bindSubmitAfterChange(){var e;null===(e=this.formNode)||void 0===e||e.querySelectorAll('input:not([type="hidden"])').forEach(e=>{["checkbox","radio"].includes(e.type)&&e.addEventListener("change",()=>{this.updateFilter()})})}getURL(e,t=window.location.pathname){return B(this,void 0,void 0,(function*(){const i=new URLSearchParams(e);i.append("mime","api"),i.append("api","get_uri_scheme");const s=yield fetch(`${t}?${i.toString()}`,{credentials:"same-origin"}),o=yield s.json();return{url:o.scheme_uri_path_query,query:o.query_string}}))}afterFilterActions(e,t,i){if(this.disablePresetQuery=!0,t&&this.changeHeading(t),this.updateSearchParams(i),this.saveStoredParams(),this.unlockButton(),"function"==typeof this.config.callbacks.filtered)try{this.config.callbacks.filtered({response:e,responseHTML:t,filterNode:this.node,formNode:this.formNode,itemsHolderNode:this.itemsHolderNode,params:this.params,total:parseInt(this.node.dataset.fazeFilterTotal||"0",10)})}catch(e){console.error(e)}}changeHeading(e){const t=this.node.querySelector(".faze-filter-heading"),i=e.querySelector(".faze-filter-heading");t&&i&&(t.innerHTML=i.innerHTML)}restoreFilteredInput(e,t){if(this.formNode){const i=["text","number","date","phone","email","datetime","textarea"];this.formNode.querySelectorAll(`input[type="${e}"], select`).forEach(s=>{const o=s.name,a=s.value,n=this.params.getAll(o);n.includes(a)?"function"==typeof t&&t(s):i.includes(e)&&n.length>0&&"function"==typeof t&&t(s,n[0])})}}restoreFilteredTextFields(){this.restoreFilteredInput("text",(e,t)=>{e.value=t||e.value||""})}restoreFilteredNumberFields(){this.restoreFilteredInput("number",(e,t)=>{e.value=t||e.value||""})}restoreFilteredCheckboxes(){this.restoreFilteredInput("checkbox",e=>{e.checked=!0})}restoreFilteredRadioButtons(){this.restoreFilteredInput("radio",e=>{e.checked=!0})}saveStoredParams(){this.cleanStoredParams(),this.config.cookie.params.forEach(e=>{let t=this.params.getAll(e);this.config.cookie.encode&&(t=t.map(e=>encodeURIComponent(e)));const i=t.join(this.config.cookie.delimiter);i&&Q.Helpers.setCookie(e,i)})}restoreStoredParams(){this.config.cookie.params.forEach(e=>{const t=Q.Helpers.getCookie(e);this.params.getAll(e).length>0||t&&(t.includes(this.config.cookie.delimiter)?t.split(this.config.cookie.delimiter).forEach(t=>{this.params.append(e,decodeURIComponent(t))}):this.params.append(e,decodeURIComponent(t)))})}cleanStoredParams(){this.config.cookie.params.forEach(e=>{Q.Helpers.setCookie(e,"",-1)})}restoreFilteredInputs(){this.restoreFilteredTextFields(),this.restoreFilteredNumberFields(),this.restoreFilteredCheckboxes(),this.restoreFilteredRadioButtons()}updateSearchParams(e){let t=void 0;this.node.dataset.fazeFilterQuery&&!this.disablePresetQuery&&(t=this.node.dataset.fazeFilterQuery.split("?")[1]),this.params=new URLSearchParams(e||t||window.location.search)}lockButton(){this.buttonSubmitNode&&this.config.changeButton&&(this.buttonSubmitNode.setAttribute("disabled","disabled"),this.buttonSubmitNode.setAttribute("data-faze-initial-text",this.buttonSubmitNode.textContent||""),this.buttonSubmitNode.classList.add("faze-disabled"),this.buttonSubmitNode.textContent=this.config.texts.buttonLoading)}unlockButton(){this.buttonSubmitNode&&this.config.changeButton&&(this.buttonSubmitNode.removeAttribute("disabled"),this.buttonSubmitNode.classList.remove("faze-disabled"),this.buttonSubmitNode.textContent=this.buttonSubmitNode.dataset.fazeInitialText||"Готово!")}updateFilter(){this.formNode&&this.formNode.dispatchEvent(new Event("submit",{cancelable:!0}))}static initializeByDataAttributes(e){new Q.Filter(e,{tableName:e.dataset.fazeFilterTableName,showTotal:"true"===e.dataset.fazeFilterShowTotal,changeButton:"true"===e.dataset.fazeFilterChangeButton,usePathnameFromQuery:"true"===e.dataset.fazeFilterUsePathnameFromQuery,updateQuery:"true"===e.dataset.fazeFilterUpdateQuery,submitAfterChange:"true"===(e.dataset.fazeFilterSubmitAfterChange||"false"),needToRequest:"true"===(e.dataset.fazeFilterNeedToRequest||"false"),modules:{get:e.dataset.fazeFilterModulesGet},selectors:{form:e.dataset.fazeFilterSelectorsForm||".faze-filter-form",itemsHolder:e.dataset.fazeFilterSelectorsItemsHolder||".faze-filter-items",total:e.dataset.fazeFilterSelectorsTotal||".faze-filter-total"}})}static hotInitialize(){Q.Observer.watch('[data-faze~="filter"]',e=>{M.initializeByDataAttributes(e)}),document.querySelectorAll('[data-faze~="filter"]').forEach(e=>{M.initializeByDataAttributes(e)})}}const O=M;const F=class{constructor(e,i){if(!e)throw new Error("Не задан объект спойлера");if(this.logger=new t("Модуль Faze.Spoiler:"),e.classList.contains("faze-spoiler-initialized"))return void this.logger.warning("Плагин уже был инициализирован на этот DOM элемент:",e);const s={callbacks:{created:void 0,opened:void 0,changed:void 0}};this.config=Object.assign(s,i),this.node=e,this.titleNode=e.querySelector('.title, [data-faze-spoiler="title"]'),this.bodyNode=e.querySelector('.body, [data-faze-spoiler="body"]'),this.initialize(),this.bind()}initialize(){if(this.node.classList.add("faze-spoiler"),this.node.classList.add("faze-spoiler-initialized"),this.titleNode&&this.titleNode.classList.add("faze-title"),this.bodyNode&&this.bodyNode.classList.add("faze-body"),"function"==typeof this.config.callbacks.created)try{this.config.callbacks.created({title:this.titleNode,body:this.bodyNode})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "created": '+e)}}bind(){this.titleNode&&this.titleNode.addEventListener("click",()=>{if(this.node.classList.toggle("faze-active"),this.node.classList.contains("faze-active")&&"function"==typeof this.config.callbacks.opened)try{this.config.callbacks.opened({title:this.titleNode,body:this.bodyNode})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "opened": '+e)}if("function"==typeof this.config.callbacks.changed)try{this.config.callbacks.changed({title:this.titleNode,body:this.bodyNode})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "changed": '+e)}})}static hotInitialize(){Q.Observer.watch('[data-faze~="spoiler"]',e=>{new Q.Spoiler(e)}),document.querySelectorAll('[data-faze~="spoiler"]').forEach(e=>{new Q.Spoiler(e)})}};const R=class{constructor(e,t){if(!e)throw new Error("Не заданы объекты галереи");const i={thumbnailsPosition:void 0,event:"click",index:void 0,group:"default",evented:!0,counter:!1,disableResolution:0};this.config=Object.assign(i,t),this.callerNodes=e,this.config.disableResolution>window.innerWidth||(this.checkConfig(),this.totalImages=this.callerNodes.length,this.activeNodes=[],this.initialize(),this.bind())}initialize(){this.callerNodes.forEach(e=>{e.classList.add("faze-gallery-caller"),e.dataset.fazeGalleryGroup||(e.dataset.fazeGalleryGroup=this.config.group)})}bind(){this.config.evented?this.callerNodes.forEach(e=>{e.dataset.fazeGalleryPassive||e.addEventListener(this.config.event,()=>{this.activeNodes=Array.from(this.callerNodes).filter(t=>t.dataset.fazeGalleryGroup===e.dataset.fazeGalleryGroup),this.totalImages=this.activeNodes.length,this.index=this.activeNodes.indexOf(e),this.build(),this.bindArrows(),this.bindCloseButton()})}):(this.activeNodes=Array.from(this.callerNodes).filter(e=>e.dataset.fazeGalleryGroup===this.config.group),this.totalImages=this.activeNodes.length,this.index=this.config.index||0,this.build(),this.bindArrows(),this.bindKeyboardButtons(),this.bindCloseButton())}build(){this.wrapperNode=document.createElement("div"),this.arrowsNodes={prev:document.createElement("div"),next:document.createElement("div")},this.closeButtonNode=document.createElement("div"),this.imageWrapperNode=document.createElement("div"),this.imageNode=document.createElement("img"),this.wrapperNode.className="faze-gallery-wrapper",this.arrowsNodes.prev.className="faze-gallery-arrow faze-gallery-arrow-prev",this.arrowsNodes.next.className="faze-gallery-arrow faze-gallery-arrow-next",this.closeButtonNode.className="faze-gallery-close",this.imageWrapperNode.className="faze-gallery-wrapper-image",this.imageNode.className="faze-gallery-image",this.wrapperNode.appendChild(this.arrowsNodes.prev);const e=this.activeNodes[this.index].dataset.fazeGalleryImage;e&&(this.imageNode.src=e),this.imageWrapperNode.appendChild(this.imageNode),this.wrapperNode.appendChild(this.imageWrapperNode),this.wrapperNode.appendChild(this.closeButtonNode),this.wrapperNode.appendChild(this.arrowsNodes.next),document.body.appendChild(this.wrapperNode),document.body.classList.add("faze-gallery"),this.config.counter&&this.buildPagination()}buildPagination(){this.counterNode=document.createElement("div"),this.counterNode.className="faze-gallery-counter",this.updateCounter(),this.wrapperNode.appendChild(this.counterNode)}updateCounter(){this.counterNode.innerHTML=`<span class="faze-gallery-counter-current">${this.index+1}</span> <span class="faze-gallery-counter-delimiter">/</span> <span class="faze-gallery-counter-total">${this.totalImages}</span>`}bindArrows(){this.arrowsNodes.prev.addEventListener("click",e=>{e.preventDefault(),this.prev()}),this.arrowsNodes.next.addEventListener("click",e=>{e.preventDefault(),this.next()})}bindKeyboardButtons(){const e=e=>{switch(e.code){case"ArrowRight":case"ArrowUp":this.next();break;case"ArrowLeft":case"ArrowDown":this.prev();break;case"Escape":this.close()}};document.removeEventListener("keyup",e),document.addEventListener("keyup",e)}bindCloseButton(){this.closeButtonNode.addEventListener("click",e=>{e.preventDefault(),this.close()})}close(){this.wrapperNode.remove(),document.body.classList.remove("faze-gallery")}next(){this.index+=1,this.index>=this.totalImages&&(this.index=0);const e=this.activeNodes[this.index].dataset.fazeGalleryImage;e&&(this.imageNode.src=e),this.config.counter&&this.updateCounter()}prev(){this.index-=1,this.index<0&&(this.index=this.totalImages-1);const e=this.activeNodes[this.index].dataset.fazeGalleryImage;e&&(this.imageNode.src=e),this.config.counter&&this.updateCounter()}checkConfig(){if(this.config.thumbnailsPosition&&!["left","right","top","bottom"].includes(this.config.thumbnailsPosition))throw new Error('Значение "thumbnailsPosition" некорректно, возможные значения: "left", "right", "top", "bottom".')}static hotInitialize(){document.querySelectorAll('[data-faze="gallery"]').forEach(e=>{e.classList.add("faze-gallery-caller"),e.dataset.fazeGalleryGroup||(e.dataset.fazeGalleryGroup="default")}),Q.on("click",'[data-faze="gallery"]:not([data-faze-gallery-passive])',(e,t)=>{const i=t.dataset.fazeGalleryGroup,s=document.querySelectorAll(`[data-faze-gallery-group="${i}"]`);parseInt(t.dataset.fazeGalleryDisableResolution||"0",10)<window.innerWidth&&new Q.Gallery(s,{group:i,evented:!1,index:Array.from(s).indexOf(t),counter:"true"===(t.dataset.fazeGalleryCounter||"false")})})}};class q{constructor(e,i){if(!e)throw new Error("Не задан объект слайдера!");let s=[];e&&e.dataset.fazeSliderPoints&&(s=e.dataset.fazeSliderPoints.split(",").map(e=>parseInt(e,10)));const o={points:s,range:[parseInt(e.dataset.fazeSliderMin||"0",10),parseInt(e.dataset.fazeSliderMax||"100",10)],connect:!0,pointsInPercent:"true"===e.dataset.fazeSliderPointsInPercent,callbacks:{created:void 0,changed:void 0,stopped:void 0}};this.config=Object.assign(o,i),this.node=e,this.logger=new t("Модуль Faze.Slider:"),this.checkConfig(),this.ratio=this.node.getBoundingClientRect().width/(this.config.range[1]-this.config.range[0]),this.pointsNodes=[],this.connectNode=null,this.initialize(),this.bind()}initialize(){if(this.node.classList.add("faze-slider"),this.config.connect&&this.createConnect(),this.initializePoints(),this.config.connect&&this.calculateConnect(),"function"==typeof this.config.callbacks.created){const e=this.getValues();try{this.config.callbacks.created({values:e})}catch(e){return this.logger.error(`Ошибка исполнения пользовательского метода "created", дословно: ${e}!`)}}}reinitialize(e={}){this.node.innerHTML="";const t=Object.assign(this.config,e);new q(this.node,t)}initializePoints(){this.config.points.forEach(e=>{this.createPoint(e)})}bind(){this.bindPoints()}bindPoints(){this.pointsNodes.forEach((e,t)=>{let i=0,s=0;const o=e.nextSibling,a=e.previousSibling,n=e=>{i=e.clientX,document.addEventListener("mouseup",d),document.addEventListener("touchend",d),document.addEventListener("mousemove",r),document.addEventListener("touchmove",r)},r=n=>{if(s=i-(n.clientX||(n.touches?n.touches[0].clientX:0)),i=n.clientX||(n.touches?n.touches[0].clientX:0),this.move(e,o,a,e.offsetLeft-s,t),this.config.connect&&this.calculateConnect(),"function"==typeof this.config.callbacks.changed){const e=this.getValues();try{this.config.callbacks.changed({values:e})}catch(e){return this.logger.error(`Ошибка исполнения пользовательского метода "changed", дословно: ${e}!`)}}},d=()=>{if(document.removeEventListener("mouseup",d),document.removeEventListener("touchend",d),document.removeEventListener("mousemove",r),document.removeEventListener("touchmove",r),this.config.connect&&this.calculateConnect(),"function"==typeof this.config.callbacks.stopped){const e=this.getValues();try{this.config.callbacks.stopped({values:e})}catch(e){return this.logger.error(`Ошибка исполнения пользовательского метода "stopped", дословно: ${e}!`)}}};e.addEventListener("mousedown",n),e.addEventListener("touchstart",n)})}createConnect(){this.connectNode=document.createElement("div"),this.connectNode.className="faze-connect",this.node.appendChild(this.connectNode)}calculateConnect(){if(this.connectNode){const e=this.pointsNodes[this.pointsNodes.length-1].offsetLeft-this.pointsNodes[0].offsetLeft,t=this.pointsNodes[0].getBoundingClientRect().width/2;let i=e-t;i<0&&(i=0),1===this.pointsNodes.length?(this.connectNode.style.width=this.pointsNodes[0].offsetLeft+"px",this.connectNode.style.left="0"):(this.connectNode.style.width=i+"px",this.connectNode.style.left=this.pointsNodes[0].offsetLeft+t+"px")}}move(e,t,i,s,o){let a=s;const n=this.node.getBoundingClientRect().width,r=e.getBoundingClientRect().width;t&&a>=t.offsetLeft&&(a=t.offsetLeft),i&&0!==o&&this.pointsNodes.length>1&&a<=i.offsetLeft&&(a=i.offsetLeft),a<=0?a=0:s>=n-r&&(a=n-r),e.style.left=a+"px"}createPoint(e){const t=document.createElement("div");t.className="faze-pointer";let i=e*this.ratio;this.config.pointsInPercent&&(i=this.node.getBoundingClientRect().width*e/100),t.style.left=i+"px",this.pointsNodes.push(t),this.node.appendChild(t);const s=this.node.getBoundingClientRect().width,o=t.getBoundingClientRect().width;t.offsetLeft>=s-o&&(t.style.left=s-o+"px")}checkConfig(){this.checkRange()}checkRange(){return this.config.range?2!==this.config.range.length?this.logger.error('Необходимо задать два значения в поле "range"!'):void 0:this.logger.error("Не задан диапазон значений для слайдера!")}setValue(e,t,i=!1){const s=this.pointsNodes[e];if(s){const o=s.nextSibling,a=s.previousSibling;let n=t-this.config.range[0];n<=0&&(n=0);let r=n*this.ratio;i&&(r=this.node.getBoundingClientRect().width*t/100),this.move(s,o,a,r,e)}this.calculateConnect()}setValues(e,t=!1){e.forEach((e,i)=>{this.setValue(i,e,t)})}getValues(){return this.pointsNodes.map((e,t)=>{let i=Math.round(parseFloat((e.offsetLeft/this.ratio).toString()))+this.config.range[0];return t===this.pointsNodes.length-1&&this.pointsNodes.length>1&&(i+=Math.round(parseFloat((e.getBoundingClientRect().width/this.ratio).toString()))),i})}recalculateRatio(){this.ratio=this.node.getBoundingClientRect().width/(this.config.range[1]-this.config.range[0])}reset(){this.setValues(this.config.points,this.config.pointsInPercent)}resetValue(e){if(e>this.config.points.length-1&&e<0)return this.logger.error("Попытка сбросить несуществующий ползунок с индексом "+e);this.setValue(e,this.config.points[e],this.config.pointsInPercent)}}const W=q;class ${constructor(e,i){if(!e)throw new Error('Не задан объект "шагов"!');if(this.logger=new t("Модуль Faze.Steps:"),e.classList.contains("faze-steps-initialized"))return void this.logger.warning("Плагин уже был инициализирован на этот DOM элемент:",e);const s={formMode:!0,callbacks:{created:void 0,changed:void 0,beforeFinished:void 0,finished:void 0,afterFinished:void 0}};this.config=Object.assign(s,i),this.node=e,this.headersNodes=e.querySelectorAll(".faze-steps-header"),this.bodiesNodes=e.querySelectorAll(".faze-steps-body"),this.currentStepIndex=0,this.initialize(),this.bind()}initialize(){if(this.node.classList.add("faze-steps"),this.node.classList.add("faze-steps-initialized"),this.activateStep(0),"function"==typeof this.config.callbacks.created)try{this.config.callbacks.created({bodyNode:this.bodiesNodes[0],index:this.currentStepIndex})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "created": '+e)}}bind(){this.bindButtons(),this.config.formMode&&this.bindFormInputs()}bindFormInputs(){this.bodiesNodes.forEach(e=>{const t=e.querySelectorAll("input[required], select[required] textarea[required]");t.length>0&&(this.lockButton(e),t.forEach(i=>{i.addEventListener("keyup",()=>{this.bindCheckSteps(e,t)}),i.addEventListener("change",()=>{this.bindCheckSteps(e,t)})}))})}bindCheckSteps(e,t){this.checkStepInputs(t)?this.unlockButton(e):this.lockButton(e)}bindButtons(){this.bindButtonsNext(),this.bindButtonsBack(),this.bindButtonsExit()}bindButtonsNext(){this.bodiesNodes.forEach(e=>{e.querySelectorAll(".faze-steps-next").forEach(t=>{t.addEventListener("click",t=>{t.preventDefault();let i=!0;e.querySelectorAll('input:not([type="checkbox"]):not([type="radio"]), textarea, select').forEach(e=>{i=e.reportValidity()}),i&&(this.currentStepIndex+=1,this.currentStepIndex>this.bodiesNodes.length&&(this.currentStepIndex=this.bodiesNodes.length),this.activateStep(this.currentStepIndex))})})})}bindButtonsBack(){this.bodiesNodes.forEach(e=>{e.querySelectorAll(".faze-steps-back").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),this.currentStepIndex-=1,this.currentStepIndex<0&&(this.currentStepIndex=0),this.activateStep(this.currentStepIndex)})})})}bindButtonsExit(){this.bodiesNodes.forEach(e=>{e.querySelectorAll(".faze-steps-finish").forEach(e=>{e.addEventListener("click",e=>{if(e.preventDefault(),"function"==typeof this.config.callbacks.beforeFinished)try{this.config.callbacks.beforeFinished({bodyNode:this.bodiesNodes[0],index:this.currentStepIndex})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "beforeFinished": '+e)}if(this.currentStepIndex+=1,this.activateStep(this.bodiesNodes.length-1),"function"==typeof this.config.callbacks.finished)try{this.config.callbacks.finished({bodyNode:this.bodiesNodes[0],index:this.currentStepIndex})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "finished": '+e)}if("function"==typeof this.config.callbacks.afterFinished)try{this.config.callbacks.afterFinished({bodyNode:this.bodiesNodes[0],index:this.currentStepIndex})}catch(e){this.logger.error('Ошибка исполнения пользовательского метода "afterFinished": '+e)}})})})}checkStepInputs(e){let t=!0;const i=e[0].closest(".faze-steps-body")||document;return e.forEach(e=>{const s="checkbox"!==e.type||a.isCheckboxChecked(e.name,i),o="radio"!==e.type||a.isRadioChecked(e.name,i);e.value&&s&&o||(t=!1)}),t}lockButton(e){e.querySelectorAll(".faze-steps-finish, .faze-steps-next").forEach(e=>{e.disabled=!0,e.classList.add("disabled")})}unlockButton(e){e.querySelectorAll(".faze-steps-finish, .faze-steps-next").forEach(e=>{e.disabled=!1,e.classList.remove("disabled")})}activateStep(e){if(this.headersNodes.forEach((t,i)=>{t.classList.toggle("faze-active",i<=e)}),this.bodiesNodes.forEach((t,i)=>{t.classList.toggle("faze-active",i===e)}),"function"==typeof this.config.callbacks.changed&&0!==e)try{this.config.callbacks.changed({bodyNode:this.bodiesNodes[e],index:this.currentStepIndex})}catch(e){console.error('Ошибка исполнения пользовательского метода "opened": '+e)}}static initializeByDataAttributes(e){new Q.Steps(e,{formMode:"true"===(e.dataset.fazeStepsFormMode||"true")})}static hotInitialize(){Q.Observer.watch('[data-faze~="steps"]',e=>{$.initializeByDataAttributes(e)}),document.querySelectorAll('[data-faze~="steps"]').forEach(e=>{$.initializeByDataAttributes(e)})}}const j=$;e.p;class _{constructor(e,t){if(!e)throw new Error("Не задан объект изображения для отложенной загрузки");const i={offset:100,width:void 0,height:void 0};this.config=Object.assign(i,t),this.node=e,this.initialize()}initialize(){this.node.classList.add("faze-lazy_image"),this.node.classList.add("faze-lazy_image-initialized"),this.config.width&&(this.node.style.width=this.config.width+"px"),this.config.height&&(this.node.style.height=this.config.height+"px")}check(){if(this.isVisible()){const e=new Image;return e.src=this.node.dataset.fazeLazy_imageImage||"",e.addEventListener("load",()=>{this.node.src=e.src,this.node.style.width="",this.node.style.height=""}),!0}return!1}isVisible(){return window.scrollY+window.innerHeight+this.config.offset>this.node.offsetTop&&null!==this.node.offsetParent}static initializeByDataAttributes(e){Q.LazyImageController.add(new Q.LazyImage(e,{offset:parseInt(e.dataset.fazeLazy_imageOffset||"0",10),width:e.dataset.fazeLazy_imageWidth?parseInt(e.dataset.fazeLazy_imageWidth||"0",10):null,height:e.dataset.fazeLazy_imageHeight?parseInt(e.dataset.fazeLazy_imageHeight||"0",10):null}))}static hotInitialize(){Q.Observer.watch('[data-faze~="lazy_image"]',e=>{_.initializeByDataAttributes(e)}),document.querySelectorAll('[data-faze~="lazy_image"]').forEach(e=>{_.initializeByDataAttributes(e)})}}const V=_;const G=class{constructor(){this.lazyImages=new Set}add(e){this.lazyImages.add(e),this.checkImage(e)}watch(){this.lazyImages.forEach(e=>{this.checkImage(e)})}checkImage(e){e.check()&&this.lazyImages.delete(e)}bind(){window.addEventListener("scroll",this.watch.bind(this)),window.addEventListener("resize",this.watch.bind(this))}};class Y{static request(e,t,i,s,o,a){let n=new FormData,r="",d="",l=i;"post"===e.toLowerCase()?(r=t||"json",d="POST"):(r=t||"html",d="GET");const h={method:d,credentials:"same-origin"};if(s instanceof FormData)n=s;else if(s instanceof HTMLFormElement)n=new FormData(s);else{if(!s)throw new Error('Параметр "data" функции ajaxRequest не является объектом');for(const e of Object.keys(s))if(s[e]instanceof Array)for(const t of s[e])n.append(e,t);else n.append(e,s[e])}if("post"===e.toLowerCase()&&(h.body=n),"get"===e.toLowerCase()){const e=[...n.entries()].map(e=>`${encodeURIComponent(e[0])}=${encodeURIComponent(e[1])}`).join("&");l+="?"+new URLSearchParams(e).toString()}fetch(""+l,h).then(e=>{let t=null;try{t="json"===r?e.json():e.text()}catch(e){console.error(e)}return t}).then(e=>{if(s.response_html&&"string"==typeof s.response_html){const t=(new DOMParser).parseFromString(e,"text/html");document.querySelectorAll(s.response_html).forEach(e=>{const i=t.querySelector(s.response_html);e.innerHTML=i?i.innerHTML:""})}else s.response_text&&"string"==typeof s.response_text?document.querySelectorAll(s.response_text).forEach(t=>{t.innerHTML=e}):s.response_callback&&"string"==typeof s.response_callback&&s.response_callback in window&&window[s.response_callback]instanceof Function?window[s.response_callback](e):s.response_json&&"string"==typeof s.response_json&&document.querySelectorAll(s.response_json).forEach(t=>{t.innerHTML=e.message});if("function"==typeof o)try{o(e)}catch(e){console.error("Ошибка исполнения пользовательского метода: ",e)}}).catch(e=>{if(console.error("Ошибка при взаимодействии с сервером: ",e),"function"==typeof o)try{o(null)}catch(e){console.error("Ошибка исполнения пользовательского метода: ",e)}})}static formSubmit(e,t){if(!(e instanceof HTMLFormElement))throw new Error("Параметр метода formSubmit не является формой");const i=new FormData(e),s=e.querySelectorAll("[data-faze-restapi-json-name]"),o=[...new Set(Array.from(s).map(e=>{const t=e.dataset.fazeRestapiJsonName;return t.includes(".")?t.substring(0,t.indexOf(".")):t}))];for(const t of o){let s={};Array.from(e.querySelectorAll("[data-faze-restapi-json-name]")).filter(e=>{const i=e.dataset.fazeRestapiJsonName;return i.includes(".")?i.startsWith(t+"."):i.startsWith(""+t)}).forEach(e=>{const t="checkbox"===e.type,o="radio"===e.type;if(["button","submit"].includes(e.type)||o&&!e.checked||t&&!e.checked&&!e.dataset.fazeRestapiDisabledValue)return;let a=e.dataset.fazeRestapiJsonName;a=a&&a.includes(".")?a.substring(a.indexOf(".")+1):"";const n=e.dataset.fazeRestapiJsonKey||e.name;let r=e.dataset.fazeRestapiJsonValue||e.value||e.dataset.fazeRestapiDisabledValue||null;t&&!e.checked&&(r=e.dataset.fazeRestapiDisabledValue||null);const d=e.dataset.fazeRestapiJsonArrayGroup||"default";r&&(s=Q.Helpers.objectFromString(s,a,n,r,d)),i.delete&&i.delete(e.name)});const o=t.split(".")[0];if(e.dataset.fazeRestapiJsonMerge){let t=null;const i=e.dataset.fazeRestapiJsonMerge;try{t=JSON.parse(i)}catch(e){console.error(`Ошибка парсинга JSON объекта для слияния("data-faze-restapi-json-merge"), JSON: ${i}, текст ошибки: `,e)}s=a.mergeDeep(!0,t,s)}i.append(o,JSON.stringify(s))}const n=e.getAttribute("action")||window.location.href;let r="text";e.elements.mime&&e.elements.mime.value&&(r=e.elements.mime.value);let d=null;d=e.dataset.fazeRestapiNotification?e:e.querySelector("[data-faze-restapi-notification]"),d&&"response_json"===d.dataset.fazeRestapiNotification&&(r="json");i.append("from",window.location.href),Y.request("POST",r,n,i,i=>{e.hasAttribute("data-faze-restapi-form")?Y.chain(e.dataset.fazeRestapiForm||null,t,i):"function"==typeof t&&(console.log("Нет атрибутов data-faze-restapi-form, но callback задан, исполняем его"),t(i)),e.classList.add("faze-restapi-form-success"),d&&(d.dataset.fazeRestapiNotificationText?d.innerHTML=d.dataset.fazeRestapiNotificationText:"response_json"===d.dataset.fazeRestapiNotification?d.innerHTML=i.message:d.innerHTML=i)},e)}static getElementValue(e){return"INPUT"===e.nodeName?e.value:e.hasAttribute("contenteditable")?e.innerHTML:"SELECT"===e.nodeName?e.options[e.selectedIndex].value:""}static dataAttr(e,t){let i=[],s=null,o=null;const a=[];if(e instanceof Element){if(o=e,!o.hasAttribute("data-faze-restapi-attr"))throw new Error("Нет дата-атрибута data-faze-restapi!");s=o.getAttribute("data-faze-restapi-attr")||""}else{if(e.constructor!==Array)throw new Error("Параметр функции ajaxDataAttr не является ни HTML элементом, ни массивом!");i=e,s=JSON.stringify(i)}try{s=JSON.parse(s)}catch(e){throw new Error(`Ошибка парсинга JSON конфига ("${s}"), дословно: ${e}`)}if(s.constructor!==Array)throw new Error("JSON не является массивом!");if(i=s,i.length){let e=null;o&&o.name&&(e=Y.getElementValue(o)),i[0].delay?(o.hasAttribute("id")||(o.id=Math.round((new Date).getTime()+1e5*Math.random())),a[o.id]&&clearTimeout(a[o.id]),a[o.id]=setTimeout(()=>{let e=null;o&&o.name&&(e=Y.getElementValue(o)),o&&o.name&&(i[0][o.name]=e),Y.chain(i,t)},i[0].delay)):(o&&o.name&&(i[0][o.name]=e),Y.chain(i,t))}}static chain(e,t,i){let s;if(e instanceof Array)s=e;else if("string"==typeof e)try{s=JSON.parse(e||"")}catch(t){console.error(`Ошибка парсинга JSON в функции ajaxChain ("${e}"), текст ошибки:`,t)}if(!s||s&&0===s.length){if("function"==typeof t)try{t(i)}catch(e){console.error("Ошибка исполнения пользовательской функции в formSubmit, текст ошибки:",e)}return}const o=s.shift();let a=o.type||null;if("function"==typeof o){try{o(i)}catch(e){console.error('Ошибка исполнения пользовательской функции переданной через "function" в ajaxChain, текст ошибки:',e)}Y.chain(s,t,i)}else if("string"==typeof o&&o in window&&window[o]&&window[o]instanceof Function)try{window[o](i)}catch(e){console.error("Ошибка исполнения пользовательской функции переданной строкой в ajaxChain, текст ошибки:",e)}else if("function"in o){const e=o.function;if(e in window&&"function"==typeof window[e])try{window[e](i)}catch(t){console.error(`Ошибка в пользовательской функции в параметре "function" с именем ${e}, текст ошибки:`,t)}Y.chain(s,t,i)}else if("method"in o){const e=o.method;let i=window.location.pathname;if(o.page&&o.module)i=/^\//.test(o.page)?o.page:`/${o.page}.txt`,o.show=o.module;else if(o.module){i=window.location.pathname;const e=["module","show","page","mime","from","update","method"],t=new URLSearchParams(window.location.search);Array.from(t).forEach(t=>{const i=t[0],s=t[1];e.includes(i)||(o[i]=s)}),o.show=o.module}else o.page&&(i=/^\//.test(o.page)?o.page:`/${o.page}.txt`);"post"===e.toLowerCase()?(o.update=o.module,o.from=window.location.href,"mime"in o||(o.mime="json")):"mime"in o||(o.mime="txt"),i=o.url||i;const n=o.callback;delete o.method,delete o.module,delete o.page,delete o.callback,delete o.url,a="json"===o.mime?"json":"html","encoding"in o||(o.encoding="utf8"),Y.request(e,a,i,o,e=>{if("function"==typeof n)try{n(e)}catch(e){console.error("Ошибка исполнения пользовательской функции переданной в ajaxChain, текст ошибки:",e)}Y.chain(s,t,e)})}else{if(!("redirect"in o))throw new Error('Не указан обязательный параметр "method" или "function" в ajaxChain');window.location.href=o.redirect}}}const X=Y;const U=class{constructor(){this.listeners=[],this.mutationObserver=new MutationObserver(this.check.bind(this)),this.mutationObserver.observe(document.documentElement,{childList:!0,subtree:!0})}watch(e,t){this.listeners.push({selector:e,callback:t,alreadyExistedNodes:Array.from(document.querySelectorAll(e))})}call(e,t){if(!Array.from(e.alreadyExistedNodes).includes(t)&&"function"==typeof e.callback){try{e.callback(t)}catch(e){console.error("Ошибка исполнения пользовательской функции переданной в Observer, текст ошибки: ",e)}e.alreadyExistedNodes.push(t)}}check(e){e.forEach(e=>{e.addedNodes.forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&this.listeners.forEach(t=>{e.matches(t.selector)&&this.call(t,e),e.querySelectorAll(t.selector).forEach(e=>{this.call(t,e)})})}),e.removedNodes.forEach(e=>{this.listeners.forEach(t=>{t.alreadyExistedNodes.forEach(i=>{i===e&&(t.alreadyExistedNodes=t.alreadyExistedNodes.filter(e=>e!==i))})})})})}};var Z;!function(e){e[e.FAZE_1=0]="FAZE_1",e[e.FAZE_2=1]="FAZE_2"}(Z||(Z={}));class J{constructor(){J.logger=new t}static bind(){J.LazyImageController.bind()}static add(e){const t={},i=["Plugin","Module","Zoom","ZoomBox","Tooltip","Carousel","Page","Gallery","Form","Spoiler","Select","Scroll","Tab","Dropdown","Slider","Steps","Helpers","Observer","Modal","Filter","REST","Logger"];if(!e)throw new Error("Не задана конфигурация плагина!");if(!("pluginName"in e)||void 0===e.pluginName)throw new Error("Не задано имя плагина!");if("global"===e.pluginName.toLowerCase()&&"function"==typeof e.callback&&Object.assign(window,e.callback()),e.pluginName in J.plugins||(J.plugins[e.pluginName]={config:e,body:void 0}),e.plugins&&e.plugins.length>0)for(const s of e.plugins)if(!i.includes(s))if(J.plugins[s]){if(void 0===J.plugins[s].body)try{J.plugins[s].body=J.plugins[s].config.callback,J.plugins[s].body=J.plugins[s].body()}catch(e){console.error(`Ошибка в плагине '${s}':`,e)}t[s]=J.plugins[s].body}else console.error(`Плагин: '${s}' не найден, его конфиг:`,e);if(e.condition&&"function"==typeof e.callback)try{e.callback(t),e.observableSelector&&J.Observer.watch(e.observableSelector,e.callback)}catch(t){console.error(`Error in plugin "${e.pluginName}", exception:`,t)}}static on(e,t,i){window.addEventListener(e,e=>{const s=e.target;if(s){const o=s.closest(t);o&&i(e,o)}})}static callFunction(e,t="Core"){if("function"==typeof e)try{e()}catch(i){this.logger.error(`Модуль Faze.${t}: Ошибка исполнения пользовательского метода "${e.name}": ${i}`)}}static remove(e){delete J.plugins[e]}static parseVersion(e){let t=Z.FAZE_1;switch(e){case"1":t=Z.FAZE_1;break;case"2":t=Z.FAZE_2;break;default:t=Z.FAZE_1}return t}static getVersion(){var e;const t=null===(e=document.currentScript)||void 0===e?void 0:e.src;let i=Z.FAZE_1;const s=t.split("?");if(s[1]){const e=new URLSearchParams(s[1]);i=J.parseVersion(e.get("version"))}return i}static hotInitialize(){J.Modal.hotInitialize(),J.Gallery.hotInitialize(),J.Page.hotInitialize(),J.Tab.hotInitialize("tab"),J.Spoiler.hotInitialize(),J.Carousel2.hotInitialize("carousel2"),J.Carousel.hotInitialize(),J.Tooltip.hotInitialize(),J.Zoom.hotInitialize(),J.ZoomBox.hotInitialize(),J.Select.hotInitialize(),J.Filter.hotInitialize(),J.Steps.hotInitialize(),J.Drag.hotInitialize(),J.Dropdown.hotInitialize(),J.LazyImage.hotInitialize()}}J.plugins={},J.Carousel=v,J.Carousel2=E,J.Tooltip=h,J.Modal=s,J.Tab=u,J.Zoom=L,J.ZoomBox=I,J.Gallery=R,J.Helpers=a,J.Date=r,J.Animations=d,J.Scroll=P,J.Spoiler=F,J.Page=T,J.Form=D,J.Filter=O,J.Drag=m,J.Dropdown=N,J.Select=z,J.Slider=W,J.Steps=j,J.LazyImage=V,J.LazyImageController=new G,J.Observer=new U,J.REST=X;const Q=J;const K=class{static initialize(){window.fazeModalClose=()=>{document.querySelectorAll(".faze-close").forEach(e=>{e.dispatchEvent(new Event("click"))})},window.fazePageReload=()=>{window.location.reload()},window.fazeAuthFormResult=e=>{e.error?console.error('Ошибка в "fazeAuthFormResult": ',e.error):"login"!==e.event&&"logout"!==e.event||setTimeout(()=>{"href"in e?window.location.href=e.href:window.location.reload()},200)},window.fazeOfferFormResult=e=>{"offer"in e&&"href"in e.offer&&(window.location.href=e.offer.href)}}};Q.bind(),Q.hotInitialize(),window.Faze=Q,a.initialize(),K.initialize()})();